/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/_app";
exports.ids = ["pages/_app"];
exports.modules = {

/***/ "./components/ui/ThemeProvider.tsx":
/*!*****************************************!*\
  !*** ./components/ui/ThemeProvider.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ThemeProvider: () => (/* binding */ ThemeProvider)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_themes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-themes */ \"next-themes\");\n/* harmony import */ var next_themes__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_themes__WEBPACK_IMPORTED_MODULE_2__);\n/* __next_internal_client_entry_do_not_use__ ThemeProvider auto */ \n\n\nfunction ThemeProvider({ children, ...props }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(next_themes__WEBPACK_IMPORTED_MODULE_2__.ThemeProvider, {\n        ...props,\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\components\\\\ui\\\\ThemeProvider.tsx\",\n        lineNumber: 8,\n        columnNumber: 10\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb21wb25lbnRzL3VpL1RoZW1lUHJvdmlkZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBRThCO0FBQ21DO0FBRzFELFNBQVNDLGNBQWMsRUFBRUUsUUFBUSxFQUFFLEdBQUdDLE9BQTJCO0lBQ3RFLHFCQUFPLDhEQUFDRixzREFBa0JBO1FBQUUsR0FBR0UsS0FBSztrQkFBR0Q7Ozs7OztBQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL2FyY2FudW0vLi9jb21wb25lbnRzL3VpL1RoZW1lUHJvdmlkZXIudHN4PzZmNDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcclxuXHJcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiXHJcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgYXMgTmV4dFRoZW1lc1Byb3ZpZGVyIH0gZnJvbSBcIm5leHQtdGhlbWVzXCJcclxuaW1wb3J0IHsgdHlwZSBUaGVtZVByb3ZpZGVyUHJvcHMgfSBmcm9tIFwibmV4dC10aGVtZXMvZGlzdC90eXBlc1wiXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gVGhlbWVQcm92aWRlcih7IGNoaWxkcmVuLCAuLi5wcm9wcyB9OiBUaGVtZVByb3ZpZGVyUHJvcHMpIHtcclxuICByZXR1cm4gPE5leHRUaGVtZXNQcm92aWRlciB7Li4ucHJvcHN9PntjaGlsZHJlbn08L05leHRUaGVtZXNQcm92aWRlcj5cclxufVxyXG4iXSwibmFtZXMiOlsiUmVhY3QiLCJUaGVtZVByb3ZpZGVyIiwiTmV4dFRoZW1lc1Byb3ZpZGVyIiwiY2hpbGRyZW4iLCJwcm9wcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./components/ui/ThemeProvider.tsx\n");

/***/ }),

/***/ "./contexts/BookContext.tsx":
/*!**********************************!*\
  !*** ./contexts/BookContext.tsx ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BookContext: () => (/* binding */ BookContext),\n/* harmony export */   BookProvider: () => (/* binding */ BookProvider),\n/* harmony export */   useBookContext: () => (/* binding */ useBookContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tanstack/react-query */ \"@tanstack/react-query\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _WalletContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WalletContext */ \"./contexts/WalletContext.tsx\");\n/* harmony import */ var _utils_cardano__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/cardano */ \"./utils/cardano.ts\");\n/* harmony import */ var _utils_bookio__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/bookio */ \"./utils/bookio.ts\");\n/* harmony import */ var _utils_validators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utils/validators */ \"./utils/validators.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__, _utils_cardano__WEBPACK_IMPORTED_MODULE_4__, _utils_validators__WEBPACK_IMPORTED_MODULE_6__]);\n([_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__, _WalletContext__WEBPACK_IMPORTED_MODULE_3__, _utils_cardano__WEBPACK_IMPORTED_MODULE_4__, _utils_validators__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nconst BookContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({\n    userBooks: [],\n    contractBooks: [],\n    collections: [],\n    cart: [],\n    addBooksToCart: (book, quantity)=>{},\n    removeBooksFromCart: (book, quanity)=>{},\n    fetchNextUserPage: ()=>{},\n    fetchNextContractPage: ()=>{},\n    findBooks: async (bookName, type)=>[],\n    isFetchingUserBooks: false,\n    isFetchingContractBooks: false,\n    booksToSend: [],\n    setBooksToSend: (books)=>{},\n    emptyCart: ()=>{}\n});\nconst useBookContext = ()=>{\n    return (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(BookContext);\n};\nconst PAGE_LENGTH = 30;\nconst BookProvider = ({ children })=>{\n    const { lucid } = (0,_WalletContext__WEBPACK_IMPORTED_MODULE_3__.useWalletContext)();\n    // const contractAddress = \"addr1q8y4ldg2e5nuyst5ty4gdp8e62fgkgv7cc73qd7f0f4e4m42djal9l8tpqzqwquae69t2dyjdzss7mxmrmnwv7mthd4s837f5f\" //getContractAddress(lucid!);\n    const contractAddress = (0,_utils_validators__WEBPACK_IMPORTED_MODULE_6__.getContractAddress)(lucid);\n    const { walletAddress } = (0,_WalletContext__WEBPACK_IMPORTED_MODULE_3__.useWalletContext)();\n    const [booksToSend, setBooksToSend] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    console.log({\n        walletAddress\n    });\n    const [cart, setCart] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]);\n    const { data: collectionData } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.useQuery)({\n        queryKey: [\n            \"bookPolicies\"\n        ],\n        queryFn: async ()=>{\n            const policies = await (0,_utils_bookio__WEBPACK_IMPORTED_MODULE_5__.getBookPolicies)();\n            return policies;\n        },\n        refetchOnWindowFocus: false\n    });\n    /* const {data:userBookData, refetch: refetchUserBooks} = useQuery({\r\n        queryKey: [\"userBooks\", walletAddress],\r\n        queryFn: async () => {\r\n            const books = (await getBooksByAddress(walletAddress, {page:1,policies:collectionData?.map((collection:any) => collection.policyId)})).books;\r\n            console.log({books})\r\n            return books\r\n        },\r\n        enabled: !!(collectionData && walletAddress),\r\n        refetchOnWindowFocus: false\r\n    }) */ const { isPending: isUserBooksPending, fetchNextPage: fetchNextUserPage, isFetching: isFetchingUserBooks, data: userBookData, isLoading: isLoadingUserBooks, error: userBookError } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.useInfiniteQuery)({\n        queryKey: [\n            \"books\",\n            walletAddress\n        ],\n        initialPageParam: 1,\n        queryFn: async ({ pageParam })=>{\n            const books = (await (0,_utils_cardano__WEBPACK_IMPORTED_MODULE_4__.getBooksByAddress)(walletAddress, {\n                page: pageParam,\n                pageLength: PAGE_LENGTH,\n                policies: collectionData?.map((collection)=>collection.policyId)\n            })).books;\n            return books //.sort((a, b) => a.metadata!.name.localeCompare(b.metadata?.name || \"\"));\n            ;\n        },\n        refetchOnWindowFocus: false,\n        getNextPageParam: (lastPage, allPages)=>{\n            if (lastPage && lastPage.length < PAGE_LENGTH) {\n                return undefined;\n            }\n            return allPages.length + 1; // Increment the page index for the next page\n        }\n    });\n    const { isPending: isContractBooksPending, fetchNextPage: fetchNextContractPage, isFetching: isFetchingContractBooks, data: contractBookData, isLoading: isLoadingContractBooks, error: contractBookError, hasNextPage: contractHasNextPage } = (0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.useInfiniteQuery)({\n        queryKey: [\n            \"books\",\n            contractAddress\n        ],\n        initialPageParam: 1,\n        queryFn: async ({ pageParam })=>{\n            const books = (await (0,_utils_cardano__WEBPACK_IMPORTED_MODULE_4__.getBooksByAddress)(contractAddress, {\n                page: pageParam,\n                pageLength: PAGE_LENGTH,\n                policies: collectionData?.map((collection)=>collection.policyId)\n            })).books;\n            return books //.sort((a, b) => a.metadata!.name.localeCompare(b.metadata?.name || \"\"));\n            ;\n        },\n        refetchOnWindowFocus: false,\n        getNextPageParam: (lastPage, allPages)=>{\n            if (lastPage && lastPage.length < PAGE_LENGTH) {\n                return undefined;\n            }\n            return allPages.length + 1; // Increment the page index for the next page\n        }\n    });\n    const controllerRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n    const findBooks = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async (bookName, type)=>{\n        //const books\n        // AbortController to manage cancellation\n        if (controllerRef.current) {\n            controllerRef.current.abort(); // Abort the previous request\n        }\n        controllerRef.current = new AbortController(); // Create a new controller for the new request\n        const signal = controllerRef.current.signal;\n        const d = type === \"user\" ? userBookData : contractBookData;\n        if (bookName === \"\") return d?.pages.flat() || [];\n        let books = [];\n        let hasNext = true;\n        const result = d?.pages.flat().filter((book)=>book.metadata?.name.toLowerCase().includes(bookName.toLowerCase())) || [];\n        if (result.length > 0) {\n            return result;\n        }\n        while(contractHasNextPage && !signal.aborted){\n            const next = type === \"user\" || type === \"trade\" ? await fetchNextUserPage() : await fetchNextContractPage();\n            if (signal.aborted) {\n                break;\n            }\n            await new Promise((resolve)=>setTimeout(resolve, 3000));\n            if (next?.data?.pages && next?.data?.pages.length > 0) {\n                const result = next?.data?.pages.flat().filter((book)=>book.metadata?.name.toLowerCase().includes(bookName.toLowerCase())) || [];\n                if (result.length > 0) {\n                    books = result;\n                    break;\n                }\n            } else {\n                break;\n            }\n        }\n        return books;\n    }, [\n        userBookData,\n        contractBookData\n    ]);\n    const addBooksToCart = (book, quantity)=>{\n        const policyId = book.tokenId.slice(0, 56);\n        const booksFound = contractBookData?.pages.flat().filter((b)=>b.tokenId.slice(0, 56) === policyId && !cart.find((c)=>c.tokenId === b.tokenId)) || [];\n        if (booksFound.length >= Number(quantity)) {\n            setCart([\n                ...cart,\n                ...booksFound.slice(0, Number(quantity))\n            ]);\n        } else {\n            console.log(\"Book not found in contract books\");\n        }\n    };\n    const removeBooksFromCart = (book, quantity)=>{\n        const policyId = book.tokenId.slice(0, 56);\n        const booksFound = cart.filter((b)=>b.tokenId.slice(0, 56) === policyId);\n        if (booksFound.length >= Number(quantity)) {\n            setCart(cart.filter((b)=>b.tokenId !== book.tokenId).slice(0, Number(quantity)));\n        } else {\n            console.log(\"Book not found in cart\");\n        }\n    };\n    const emptyCart = ()=>{\n        setCart([]);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BookContext.Provider, {\n        value: {\n            userBooks: userBookData?.pages.flat() || [],\n            contractBooks: contractBookData?.pages.flat() || [],\n            collections: collectionData || [],\n            cart,\n            addBooksToCart,\n            removeBooksFromCart,\n            fetchNextUserPage,\n            findBooks,\n            isFetchingUserBooks,\n            isFetchingContractBooks,\n            fetchNextContractPage,\n            booksToSend,\n            setBooksToSend,\n            emptyCart\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\contexts\\\\BookContext.tsx\",\n        lineNumber: 174,\n        columnNumber: 12\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBUUMsR0FBRyxDQUFDO1FBQ2hCO0lBQ0o7SUFFQSxNQUFNckIsc0JBQXNCLENBQUNGLE1BQVlDO1FBQ3JDLE1BQU02QyxXQUFXOUMsS0FBSzhFLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLEdBQUc7UUFDdkMsTUFBTUMsYUFBYWxGLEtBQUtzRSxNQUFNLENBQUNhLENBQUFBLElBQUtBLEVBQUVILE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsUUFBUWpDO1FBQy9ELElBQUlrQyxXQUFXOUIsTUFBTSxJQUFJa0MsT0FBT25GLFdBQVc7WUFDdkN1QixRQUFRMUIsS0FBS3NFLE1BQU0sQ0FBQ2EsQ0FBQUEsSUFBS0EsRUFBRUgsT0FBTyxLQUFLOUUsS0FBSzhFLE9BQU8sRUFBRUMsS0FBSyxDQUFDLEdBQUdLLE9BQU9uRjtRQUN6RSxPQUFPO1lBQ0hxQixRQUFRQyxHQUFHLENBQUM7UUFDaEI7SUFDSjtJQUVBLE1BQU1ULFlBQVk7UUFDZFUsUUFBUSxFQUFFO0lBQ2Q7SUFFQSxxQkFBTyw4REFBQzlCLFlBQVkyRixRQUFRO1FBQUNDLE9BQU87WUFBRTNGLFdBQVd3QyxjQUFjNkIsTUFBTUMsVUFBVSxFQUFFO1lBQUVyRSxlQUFleUQsa0JBQWtCVyxNQUFNQyxVQUFVLEVBQUU7WUFBRXBFLGFBQWE2QixrQkFBa0IsRUFBRTtZQUFFNUI7WUFBTUM7WUFBZ0JHO1lBQXFCRTtZQUFtQkU7WUFBV0c7WUFBcUJDO1lBQXlCTDtZQUF1Qk07WUFBYUM7WUFBZ0JFO1FBQVU7a0JBQzNWSTs7Ozs7O0FBRVQsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FyY2FudW0vLi9jb250ZXh0cy9Cb29rQ29udGV4dC50c3g/OTI5MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb29rLCBCb29rQ29sbGVjdGlvbiB9IGZyb20gXCJAL3R5cGVzL2Jvb2tpb1wiO1xyXG5pbXBvcnQgeyB1c2VJbmZpbml0ZVF1ZXJ5LCB1c2VRdWVyeSB9IGZyb20gXCJAdGFuc3RhY2svcmVhY3QtcXVlcnlcIjtcclxuaW1wb3J0IHsgY3JlYXRlQ29udGV4dCwgdXNlQ2FsbGJhY2ssIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyB1c2VXYWxsZXRDb250ZXh0IH0gZnJvbSBcIi4vV2FsbGV0Q29udGV4dFwiO1xyXG5pbXBvcnQgeyBnZXRCb29rc0J5QWRkcmVzcyB9IGZyb20gXCJAL3V0aWxzL2NhcmRhbm9cIjtcclxuaW1wb3J0IHsgZ2V0Qm9va1BvbGljaWVzIH0gZnJvbSBcIkAvdXRpbHMvYm9va2lvXCI7XHJcbmltcG9ydCB7IFRva2VuSW5mbyB9IGZyb20gXCJAL3R5cGVzL2NhcmRhbm9cIjtcclxuaW1wb3J0IHsgZ2V0Q29udHJhY3RBZGRyZXNzIH0gZnJvbSBcIkAvdXRpbHMvdmFsaWRhdG9yc1wiO1xyXG5cclxudHlwZSBCb29rQ29udGV4dFR5cGUgPSB7XHJcbiAgICB1c2VyQm9va3M6IEJvb2tbXSxcclxuICAgIGNvbnRyYWN0Qm9va3M6IEJvb2tbXSxcclxuICAgIGNvbGxlY3Rpb25zOiBCb29rQ29sbGVjdGlvbltdLFxyXG4gICAgY2FydDogQm9va1tdLFxyXG4gICAgYWRkQm9va3NUb0NhcnQ6IChib29rOiBCb29rLCBxdWFudGl0eTogYmlnaW50KSA9PiB2b2lkLFxyXG4gICAgcmVtb3ZlQm9va3NGcm9tQ2FydDogKGJvb2s6IEJvb2ssIHF1YW50aXR5OiBiaWdpbnQpID0+IHZvaWQsXHJcbiAgICBmZXRjaE5leHRVc2VyUGFnZTogKCkgPT4gdm9pZCxcclxuICAgIGZldGNoTmV4dENvbnRyYWN0UGFnZTogKCkgPT4gdm9pZCxcclxuICAgIGZpbmRCb29rczogKGJvb2tOYW1lOiBzdHJpbmcsIHR5cGU6IFwidXNlclwiIHwgXCJjb250cmFjdFwiKSA9PiBQcm9taXNlPFRva2VuSW5mb1tdPixcclxuICAgIGlzRmV0Y2hpbmdVc2VyQm9va3M6IGJvb2xlYW4sXHJcbiAgICBpc0ZldGNoaW5nQ29udHJhY3RCb29rczogYm9vbGVhbixcclxuICAgIGJvb2tzVG9TZW5kOiBCb29rW10sXHJcbiAgICBzZXRCb29rc1RvU2VuZDogKGJvb2tzOiBCb29rW10pID0+IHZvaWQsXHJcbiAgICBlbXB0eUNhcnQ6ICgpID0+IHZvaWRcclxuXHJcbn1cclxuZXhwb3J0IGNvbnN0IEJvb2tDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxCb29rQ29udGV4dFR5cGU+KHtcclxuICAgIHVzZXJCb29rczogW10sXHJcbiAgICBjb250cmFjdEJvb2tzOiBbXSxcclxuICAgIGNvbGxlY3Rpb25zOiBbXSxcclxuICAgIGNhcnQ6IFtdLFxyXG4gICAgYWRkQm9va3NUb0NhcnQ6IChib29rOiBCb29rLCBxdWFudGl0eTogYmlnaW50KSA9PiB7IH0sXHJcbiAgICByZW1vdmVCb29rc0Zyb21DYXJ0OiAoYm9vazogQm9vaywgcXVhbml0eTogYmlnaW50KSA9PiB7IH0sXHJcbiAgICBmZXRjaE5leHRVc2VyUGFnZTogKCkgPT4geyB9LFxyXG4gICAgZmV0Y2hOZXh0Q29udHJhY3RQYWdlOiAoKSA9PiB7IH0sXHJcbiAgICBmaW5kQm9va3M6IGFzeW5jIChib29rTmFtZTogc3RyaW5nLCB0eXBlOiBcInVzZXJcIiB8IFwiY29udHJhY3RcIikgPT4gW10sXHJcbiAgICBpc0ZldGNoaW5nVXNlckJvb2tzOiBmYWxzZSxcclxuICAgIGlzRmV0Y2hpbmdDb250cmFjdEJvb2tzOiBmYWxzZSxcclxuICAgIGJvb2tzVG9TZW5kOiBbXSxcclxuICAgIHNldEJvb2tzVG9TZW5kOiAoYm9va3M6IEJvb2tbXSkgPT4geyB9LFxyXG4gICAgZW1wdHlDYXJ0OiAoKSA9PiB7IH1cclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgdXNlQm9va0NvbnRleHQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdXNlQ29udGV4dChCb29rQ29udGV4dCk7XHJcbn1cclxuXHJcbmNvbnN0IFBBR0VfTEVOR1RIID0gMzA7XHJcblxyXG5leHBvcnQgY29uc3QgQm9va1Byb3ZpZGVyID0gKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pID0+IHtcclxuICAgIGNvbnN0IHsgbHVjaWQgfSA9IHVzZVdhbGxldENvbnRleHQoKTtcclxuICAgLy8gY29uc3QgY29udHJhY3RBZGRyZXNzID0gXCJhZGRyMXE4eTRsZGcyZTVudXlzdDV0eTRnZHA4ZTYyZmdrZ3Y3Y2M3M3FkN2YwZjRlNG00MmRqYWw5bDh0cHF6cXdxdWFlNjl0MmR5amR6c3M3bXhtcm1ud3Y3bXRoZDRzODM3ZjVmXCIgLy9nZXRDb250cmFjdEFkZHJlc3MobHVjaWQhKTtcclxuICAgIGNvbnN0IGNvbnRyYWN0QWRkcmVzcyA9IGdldENvbnRyYWN0QWRkcmVzcyhsdWNpZCEpO1xyXG4gICBjb25zdCB7IHdhbGxldEFkZHJlc3MgfSA9IHVzZVdhbGxldENvbnRleHQoKTtcclxuICAgIGNvbnN0IFtib29rc1RvU2VuZCwgc2V0Qm9va3NUb1NlbmRdID0gdXNlU3RhdGU8Qm9va1tdPihbXSk7XHJcbiAgICBjb25zb2xlLmxvZyh7IHdhbGxldEFkZHJlc3MgfSlcclxuICAgIGNvbnN0IFtjYXJ0LCBzZXRDYXJ0XSA9IHVzZVN0YXRlPEJvb2tbXT4oW10pO1xyXG4gICAgY29uc3QgeyBkYXRhOiBjb2xsZWN0aW9uRGF0YSB9ID0gdXNlUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5S2V5OiBbXCJib29rUG9saWNpZXNcIl0sXHJcbiAgICAgICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwb2xpY2llcyA9IGF3YWl0IGdldEJvb2tQb2xpY2llcygpO1xyXG4gICAgICAgICAgICByZXR1cm4gcG9saWNpZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2VcclxuICAgIH0pXHJcbiAgICAvKiBjb25zdCB7ZGF0YTp1c2VyQm9va0RhdGEsIHJlZmV0Y2g6IHJlZmV0Y2hVc2VyQm9va3N9ID0gdXNlUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5S2V5OiBbXCJ1c2VyQm9va3NcIiwgd2FsbGV0QWRkcmVzc10sXHJcbiAgICAgICAgcXVlcnlGbjogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBib29rcyA9IChhd2FpdCBnZXRCb29rc0J5QWRkcmVzcyh3YWxsZXRBZGRyZXNzLCB7cGFnZToxLHBvbGljaWVzOmNvbGxlY3Rpb25EYXRhPy5tYXAoKGNvbGxlY3Rpb246YW55KSA9PiBjb2xsZWN0aW9uLnBvbGljeUlkKX0pKS5ib29rcztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coe2Jvb2tzfSlcclxuICAgICAgICAgICAgcmV0dXJuIGJvb2tzXHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmFibGVkOiAhIShjb2xsZWN0aW9uRGF0YSAmJiB3YWxsZXRBZGRyZXNzKSxcclxuICAgICAgICByZWZldGNoT25XaW5kb3dGb2N1czogZmFsc2VcclxuICAgIH0pICovXHJcblxyXG4gICAgY29uc3QgeyBpc1BlbmRpbmc6IGlzVXNlckJvb2tzUGVuZGluZywgZmV0Y2hOZXh0UGFnZTogZmV0Y2hOZXh0VXNlclBhZ2UsIGlzRmV0Y2hpbmc6IGlzRmV0Y2hpbmdVc2VyQm9va3MsIGRhdGE6IHVzZXJCb29rRGF0YSwgaXNMb2FkaW5nOiBpc0xvYWRpbmdVc2VyQm9va3MsIGVycm9yOiB1c2VyQm9va0Vycm9yIH0gPSB1c2VJbmZpbml0ZVF1ZXJ5KHtcclxuICAgICAgICBxdWVyeUtleTogWydib29rcycsIHdhbGxldEFkZHJlc3NdLFxyXG4gICAgICAgIGluaXRpYWxQYWdlUGFyYW06IDEsXHJcbiAgICAgICAgcXVlcnlGbjogYXN5bmMgKHsgcGFnZVBhcmFtIH0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYm9va3MgPSAoYXdhaXQgZ2V0Qm9va3NCeUFkZHJlc3Mod2FsbGV0QWRkcmVzcywgeyBwYWdlOiBwYWdlUGFyYW0sIHBhZ2VMZW5ndGg6IFBBR0VfTEVOR1RILCBwb2xpY2llczogY29sbGVjdGlvbkRhdGE/Lm1hcCgoY29sbGVjdGlvbjogYW55KSA9PiBjb2xsZWN0aW9uLnBvbGljeUlkKSB9KSkuYm9va3M7XHJcbiAgICAgICAgICAgIHJldHVybiBib29rcy8vLnNvcnQoKGEsIGIpID0+IGEubWV0YWRhdGEhLm5hbWUubG9jYWxlQ29tcGFyZShiLm1ldGFkYXRhPy5uYW1lIHx8IFwiXCIpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxcclxuICAgICAgICBnZXROZXh0UGFnZVBhcmFtOiAobGFzdFBhZ2UsIGFsbFBhZ2VzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsYXN0UGFnZSAmJiBsYXN0UGFnZS5sZW5ndGggPCBQQUdFX0xFTkdUSCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYWxsUGFnZXMubGVuZ3RoICsgMTsgIC8vIEluY3JlbWVudCB0aGUgcGFnZSBpbmRleCBmb3IgdGhlIG5leHQgcGFnZVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IHsgaXNQZW5kaW5nOiBpc0NvbnRyYWN0Qm9va3NQZW5kaW5nLCBmZXRjaE5leHRQYWdlOiBmZXRjaE5leHRDb250cmFjdFBhZ2UsIGlzRmV0Y2hpbmc6IGlzRmV0Y2hpbmdDb250cmFjdEJvb2tzLCBkYXRhOiBjb250cmFjdEJvb2tEYXRhLCBpc0xvYWRpbmc6IGlzTG9hZGluZ0NvbnRyYWN0Qm9va3MsIGVycm9yOiBjb250cmFjdEJvb2tFcnJvciwgaGFzTmV4dFBhZ2U6IGNvbnRyYWN0SGFzTmV4dFBhZ2UgfSA9IHVzZUluZmluaXRlUXVlcnkoe1xyXG4gICAgICAgIHF1ZXJ5S2V5OiBbJ2Jvb2tzJywgY29udHJhY3RBZGRyZXNzXSxcclxuICAgICAgICBpbml0aWFsUGFnZVBhcmFtOiAxLFxyXG4gICAgICAgIHF1ZXJ5Rm46IGFzeW5jICh7IHBhZ2VQYXJhbSB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJvb2tzID0gKGF3YWl0IGdldEJvb2tzQnlBZGRyZXNzKGNvbnRyYWN0QWRkcmVzcywgeyBwYWdlOiBwYWdlUGFyYW0sIHBhZ2VMZW5ndGg6IFBBR0VfTEVOR1RILCBwb2xpY2llczogY29sbGVjdGlvbkRhdGE/Lm1hcCgoY29sbGVjdGlvbjogYW55KSA9PiBjb2xsZWN0aW9uLnBvbGljeUlkKSB9KSkuYm9va3M7XHJcbiAgICAgICAgICAgIHJldHVybiBib29rcy8vLnNvcnQoKGEsIGIpID0+IGEubWV0YWRhdGEhLm5hbWUubG9jYWxlQ29tcGFyZShiLm1ldGFkYXRhPy5uYW1lIHx8IFwiXCIpKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZmV0Y2hPbldpbmRvd0ZvY3VzOiBmYWxzZSxcclxuICAgICAgICBnZXROZXh0UGFnZVBhcmFtOiAobGFzdFBhZ2UsIGFsbFBhZ2VzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChsYXN0UGFnZSAmJiBsYXN0UGFnZS5sZW5ndGggPCBQQUdFX0xFTkdUSCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYWxsUGFnZXMubGVuZ3RoICsgMTsgIC8vIEluY3JlbWVudCB0aGUgcGFnZSBpbmRleCBmb3IgdGhlIG5leHQgcGFnZVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgY29udHJvbGxlclJlZiA9IHVzZVJlZjxBYm9ydENvbnRyb2xsZXIgfCBudWxsPihudWxsKTtcclxuICAgIGNvbnN0IGZpbmRCb29rcyA9IHVzZUNhbGxiYWNrKGFzeW5jIChib29rTmFtZTogc3RyaW5nLCB0eXBlOiBcInVzZXJcIiB8IFwiY29udHJhY3RcIiB8IFwidHJhZGVcIikgPT4ge1xyXG4gICAgICAgIC8vY29uc3QgYm9va3NcclxuICAgICAgICAvLyBBYm9ydENvbnRyb2xsZXIgdG8gbWFuYWdlIGNhbmNlbGxhdGlvblxyXG4gICAgICAgIGlmIChjb250cm9sbGVyUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlclJlZi5jdXJyZW50LmFib3J0KCk7ICAvLyBBYm9ydCB0aGUgcHJldmlvdXMgcmVxdWVzdFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb250cm9sbGVyUmVmLmN1cnJlbnQgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7ICAvLyBDcmVhdGUgYSBuZXcgY29udHJvbGxlciBmb3IgdGhlIG5ldyByZXF1ZXN0XHJcbiAgICAgICAgY29uc3Qgc2lnbmFsID0gY29udHJvbGxlclJlZi5jdXJyZW50LnNpZ25hbDtcclxuXHJcbiAgICAgICAgY29uc3QgZCA9IHR5cGUgPT09IFwidXNlclwiID8gdXNlckJvb2tEYXRhIDogY29udHJhY3RCb29rRGF0YTtcclxuICAgICAgICBpZiAoYm9va05hbWUgPT09IFwiXCIpIHJldHVybiBkPy5wYWdlcy5mbGF0KCkgfHwgW107XHJcbiAgICAgICAgbGV0IGJvb2tzOiBUb2tlbkluZm9bXSA9IFtdXHJcbiAgICAgICAgbGV0IGhhc05leHQgPSB0cnVlO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGQ/LnBhZ2VzLmZsYXQoKS5maWx0ZXIoYm9vayA9PiBib29rLm1ldGFkYXRhPy5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoYm9va05hbWUudG9Mb3dlckNhc2UoKSkpIHx8IFtdO1xyXG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICB3aGlsZSAoY29udHJhY3RIYXNOZXh0UGFnZSAmJiAhc2lnbmFsLmFib3J0ZWQgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSAodHlwZSA9PT0gXCJ1c2VyXCIgfHwgdHlwZSA9PT0gXCJ0cmFkZVwiKSA/IGF3YWl0IGZldGNoTmV4dFVzZXJQYWdlKCkgOiBhd2FpdCBmZXRjaE5leHRDb250cmFjdFBhZ2UoKTtcclxuICAgICAgICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFYXJseSBleGl0IGlmIHRoZSBmZXRjaCBoYXMgYmVlbiBhYm9ydGVkXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMzAwMCkpO1xyXG4gICAgICAgICAgICBpZiAobmV4dD8uZGF0YT8ucGFnZXMgJiYgbmV4dD8uZGF0YT8ucGFnZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV4dD8uZGF0YT8ucGFnZXMuZmxhdCgpLmZpbHRlcihib29rID0+IGJvb2subWV0YWRhdGE/Lm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhib29rTmFtZS50b0xvd2VyQ2FzZSgpKSkgfHwgW107XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBib29rcyA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBib29rcztcclxuICAgIH1cclxuICAgICAgICAsIFt1c2VyQm9va0RhdGEsIGNvbnRyYWN0Qm9va0RhdGFdKVxyXG5cclxuXHJcbiAgICBjb25zdCBhZGRCb29rc1RvQ2FydCA9IChib29rOiBCb29rLCBxdWFudGl0eTogYmlnaW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgcG9saWN5SWQgPSBib29rLnRva2VuSWQuc2xpY2UoMCwgNTYpO1xyXG5cclxuICAgICAgICBjb25zdCBib29rc0ZvdW5kID0gY29udHJhY3RCb29rRGF0YT8ucGFnZXMuZmxhdCgpLmZpbHRlcihiID0+IGIudG9rZW5JZC5zbGljZSgwLCA1NikgPT09IHBvbGljeUlkICYmICFjYXJ0LmZpbmQoYyA9PiBjLnRva2VuSWQgPT09IGIudG9rZW5JZCkpIHx8IFtdO1xyXG4gICAgICAgIGlmIChib29rc0ZvdW5kLmxlbmd0aCA+PSBOdW1iZXIocXVhbnRpdHkpKSB7XHJcbiAgICAgICAgICAgIHNldENhcnQoWy4uLmNhcnQsIC4uLmJvb2tzRm91bmQuc2xpY2UoMCwgTnVtYmVyKHF1YW50aXR5KSldKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJvb2sgbm90IGZvdW5kIGluIGNvbnRyYWN0IGJvb2tzXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlbW92ZUJvb2tzRnJvbUNhcnQgPSAoYm9vazogQm9vaywgcXVhbnRpdHk6IGJpZ2ludCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHBvbGljeUlkID0gYm9vay50b2tlbklkLnNsaWNlKDAsIDU2KTtcclxuICAgICAgICBjb25zdCBib29rc0ZvdW5kID0gY2FydC5maWx0ZXIoYiA9PiBiLnRva2VuSWQuc2xpY2UoMCwgNTYpID09PSBwb2xpY3lJZCk7XHJcbiAgICAgICAgaWYgKGJvb2tzRm91bmQubGVuZ3RoID49IE51bWJlcihxdWFudGl0eSkpIHtcclxuICAgICAgICAgICAgc2V0Q2FydChjYXJ0LmZpbHRlcihiID0+IGIudG9rZW5JZCAhPT0gYm9vay50b2tlbklkKS5zbGljZSgwLCBOdW1iZXIocXVhbnRpdHkpKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJCb29rIG5vdCBmb3VuZCBpbiBjYXJ0XCIpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVtcHR5Q2FydCA9ICgpID0+IHtcclxuICAgICAgICBzZXRDYXJ0KFtdKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gPEJvb2tDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHVzZXJCb29rczogdXNlckJvb2tEYXRhPy5wYWdlcy5mbGF0KCkgfHwgW10sIGNvbnRyYWN0Qm9va3M6IGNvbnRyYWN0Qm9va0RhdGE/LnBhZ2VzLmZsYXQoKSB8fCBbXSwgY29sbGVjdGlvbnM6IGNvbGxlY3Rpb25EYXRhIHx8IFtdLCBjYXJ0LCBhZGRCb29rc1RvQ2FydCwgcmVtb3ZlQm9va3NGcm9tQ2FydCwgZmV0Y2hOZXh0VXNlclBhZ2UsIGZpbmRCb29rcywgaXNGZXRjaGluZ1VzZXJCb29rcywgaXNGZXRjaGluZ0NvbnRyYWN0Qm9va3MsIGZldGNoTmV4dENvbnRyYWN0UGFnZSwgYm9va3NUb1NlbmQsIHNldEJvb2tzVG9TZW5kLCBlbXB0eUNhcnQgfX0+XHJcbiAgICAgICAge2NoaWxkcmVufVxyXG4gICAgPC9Cb29rQ29udGV4dC5Qcm92aWRlcj5cclxufSJdLCJuYW1lcyI6WyJ1c2VJbmZpbml0ZVF1ZXJ5IiwidXNlUXVlcnkiLCJjcmVhdGVDb250ZXh0IiwidXNlQ2FsbGJhY2siLCJ1c2VDb250ZXh0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VXYWxsZXRDb250ZXh0IiwiZ2V0Qm9va3NCeUFkZHJlc3MiLCJnZXRCb29rUG9saWNpZXMiLCJnZXRDb250cmFjdEFkZHJlc3MiLCJCb29rQ29udGV4dCIsInVzZXJCb29rcyIsImNvbnRyYWN0Qm9va3MiLCJjb2xsZWN0aW9ucyIsImNhcnQiLCJhZGRCb29rc1RvQ2FydCIsImJvb2siLCJxdWFudGl0eSIsInJlbW92ZUJvb2tzRnJvbUNhcnQiLCJxdWFuaXR5IiwiZmV0Y2hOZXh0VXNlclBhZ2UiLCJmZXRjaE5leHRDb250cmFjdFBhZ2UiLCJmaW5kQm9va3MiLCJib29rTmFtZSIsInR5cGUiLCJpc0ZldGNoaW5nVXNlckJvb2tzIiwiaXNGZXRjaGluZ0NvbnRyYWN0Qm9va3MiLCJib29rc1RvU2VuZCIsInNldEJvb2tzVG9TZW5kIiwiYm9va3MiLCJlbXB0eUNhcnQiLCJ1c2VCb29rQ29udGV4dCIsIlBBR0VfTEVOR1RIIiwiQm9va1Byb3ZpZGVyIiwiY2hpbGRyZW4iLCJsdWNpZCIsImNvbnRyYWN0QWRkcmVzcyIsIndhbGxldEFkZHJlc3MiLCJjb25zb2xlIiwibG9nIiwic2V0Q2FydCIsImRhdGEiLCJjb2xsZWN0aW9uRGF0YSIsInF1ZXJ5S2V5IiwicXVlcnlGbiIsInBvbGljaWVzIiwicmVmZXRjaE9uV2luZG93Rm9jdXMiLCJpc1BlbmRpbmciLCJpc1VzZXJCb29rc1BlbmRpbmciLCJmZXRjaE5leHRQYWdlIiwiaXNGZXRjaGluZyIsInVzZXJCb29rRGF0YSIsImlzTG9hZGluZyIsImlzTG9hZGluZ1VzZXJCb29rcyIsImVycm9yIiwidXNlckJvb2tFcnJvciIsImluaXRpYWxQYWdlUGFyYW0iLCJwYWdlUGFyYW0iLCJwYWdlIiwicGFnZUxlbmd0aCIsIm1hcCIsImNvbGxlY3Rpb24iLCJwb2xpY3lJZCIsImdldE5leHRQYWdlUGFyYW0iLCJsYXN0UGFnZSIsImFsbFBhZ2VzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiaXNDb250cmFjdEJvb2tzUGVuZGluZyIsImNvbnRyYWN0Qm9va0RhdGEiLCJpc0xvYWRpbmdDb250cmFjdEJvb2tzIiwiY29udHJhY3RCb29rRXJyb3IiLCJoYXNOZXh0UGFnZSIsImNvbnRyYWN0SGFzTmV4dFBhZ2UiLCJjb250cm9sbGVyUmVmIiwiY3VycmVudCIsImFib3J0IiwiQWJvcnRDb250cm9sbGVyIiwic2lnbmFsIiwiZCIsInBhZ2VzIiwiZmxhdCIsImhhc05leHQiLCJyZXN1bHQiLCJmaWx0ZXIiLCJtZXRhZGF0YSIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiYWJvcnRlZCIsIm5leHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJ0b2tlbklkIiwic2xpY2UiLCJib29rc0ZvdW5kIiwiYiIsImZpbmQiLCJjIiwiTnVtYmVyIiwiUHJvdmlkZXIiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./contexts/BookContext.tsx\n");

/***/ }),

/***/ "./contexts/WalletContext.tsx":
/*!************************************!*\
  !*** ./contexts/WalletContext.tsx ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WalletContext: () => (/* binding */ WalletContext),\n/* harmony export */   WalletProvider: () => (/* binding */ WalletProvider),\n/* harmony export */   useWalletContext: () => (/* binding */ useWalletContext)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lucid_cardano__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lucid-cardano */ \"lucid-cardano\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lucid_cardano__WEBPACK_IMPORTED_MODULE_1__]);\nlucid_cardano__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst WalletContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_2__.createContext)({\n    walletName: \"\",\n    walletAddress: \"\",\n    walletApi: null,\n    connected: false,\n    lucid: null,\n    connectWallet: (walletName)=>{},\n    disconnectWallet: ()=>{},\n    balance: {\n        balance: 0n,\n        books: []\n    }\n});\nconst useWalletContext = ()=>{\n    return (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(WalletContext);\n};\nconst WalletProvider = ({ children })=>{\n    const [walletName, setWalletName] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    const [walletApi, setWalletApi] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [lucid, setLucid] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const [connected, setConnected] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);\n    const [balance, setBalance] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)({\n        balance: 0n,\n        books: []\n    });\n    const [walletAddress, setWalletAddress] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(\"\");\n    //const { logout: web3authLogout, web3AuthAPI, walletAddress, login: web3auth!.fullLogin, loggedIn, getAccounts, getBalance, isLoading } = useWeb3Auth();\n    const initializeLucid = async ()=>{\n        const lucid = await lucid_cardano__WEBPACK_IMPORTED_MODULE_1__.Lucid.new(new lucid_cardano__WEBPACK_IMPORTED_MODULE_1__.Blockfrost(\"https://cardano-mainnet.blockfrost.io/api/v0\", \"mainnetRYnsFXoxIeqmPhpUcHmS91I0DfADfJon\"));\n        setLucid(lucid);\n        return lucid;\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        initializeLucid();\n    }, []);\n    const connectWallet = async (walletName)=>{\n        console.log(\"connecting wallet\");\n        setWalletName(walletName);\n        const walletApi = await window.cardano[walletName].enable();\n        setWalletApi(walletApi);\n        initializeLucid().then(async (lucid)=>{\n            lucid.selectWallet(walletApi);\n            const address = await lucid.wallet.address();\n            // const address = \"addr1q8y4ldg2e5nuyst5ty4gdp8e62fgkgv7cc73qd7f0f4e4m42djal9l8tpqzqwquae69t2dyjdzss7mxmrmnwv7mthd4s837f5f\"\n            setWalletAddress(address);\n            setLucid(lucid);\n        // const cardanoBalance = await getBooksByAddress(address, {policies:bookPolicies});\n        //setBalance( cardanoBalance);\n        });\n        console.log(window);\n        setConnected(true);\n        localStorage.setItem(\"walletName\", walletName);\n        localStorage.setItem(\"connected\", \"true\");\n    };\n    const disconnectWallet = ()=>{\n        console.log(\"disconnecting wallet\");\n        setConnected(false);\n        setWalletName(\"\");\n        setWalletAddress(\"\");\n        setWalletApi(null);\n        localStorage.removeItem(\"walletName\");\n        localStorage.removeItem(\"connected\");\n    };\n    /* if(isWeb3AuthNotInstantiated || !web3auth) return (\r\n        <WalletContext.Provider value={{ walletName, walletApi, blockchain, lucid, connectWallet, connected, addresses, disconnectWallet, setBlockchain, balance }}>\r\n            {children}\r\n        </WalletContext.Provider>\r\n    ); */ (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{\n        const walletName = localStorage.getItem(\"walletName\");\n        if (walletName) {\n            connectWallet(walletName);\n        //setWalletName(walletName);\n        }\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(WalletContext.Provider, {\n        value: {\n            walletName,\n            walletApi,\n            lucid,\n            connectWallet,\n            connected,\n            disconnectWallet,\n            balance,\n            walletAddress\n        },\n        children: children\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\contexts\\\\WalletContext.tsx\",\n        lineNumber: 99,\n        columnNumber: 9\n    }, undefined);\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jb250ZXh0cy9XYWxsZXRDb250ZXh0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNkQ7QUFDaUI7QUFNdkUsTUFBTU8sOEJBQWdCSixvREFBYUEsQ0FTdkM7SUFDQ0ssWUFBWTtJQUNaQyxlQUFjO0lBQ2RDLFdBQVc7SUFDWEMsV0FBVztJQUNYQyxPQUFPO0lBQ1BDLGVBQWUsQ0FBQ0wsY0FBeUI7SUFDekNNLGtCQUFrQixLQUFRO0lBQzFCQyxTQUFTO1FBQUVBLFNBQVMsRUFBRTtRQUFFQyxPQUFNLEVBQUU7SUFBQTtBQUNwQyxHQUFHO0FBRUksTUFBTUMsbUJBQW1CO0lBQzVCLE9BQU9iLGlEQUFVQSxDQUFDRztBQUN0QixFQUFDO0FBR00sTUFBTVcsaUJBQWlCLENBQUMsRUFBRUMsUUFBUSxFQUFpQztJQUN0RSxNQUFNLENBQUNYLFlBQVlZLGNBQWMsR0FBR2QsK0NBQVFBLENBQVM7SUFDckQsTUFBTSxDQUFDSSxXQUFXVyxhQUFhLEdBQUdmLCtDQUFRQSxDQUFtQjtJQUM3RCxNQUFNLENBQUNNLE9BQU9VLFNBQVMsR0FBR2hCLCtDQUFRQSxDQUFlO0lBQ2pELE1BQU0sQ0FBQ0ssV0FBV1ksYUFBYSxHQUFHakIsK0NBQVFBLENBQVU7SUFDcEQsTUFBTSxDQUFDUyxTQUFTUyxXQUFXLEdBQUdsQiwrQ0FBUUEsQ0FBcUI7UUFBRVMsU0FBUyxFQUFFO1FBQUVDLE9BQU0sRUFBRTtJQUFDO0lBQ25GLE1BQU0sQ0FBQ1AsZUFBZWdCLGlCQUFpQixHQUFHbkIsK0NBQVFBLENBQVM7SUFDM0QseUpBQXlKO0lBRXpKLE1BQU1vQixrQkFBa0I7UUFDcEIsTUFBTWQsUUFBUSxNQUFNWCxnREFBS0EsQ0FBQzBCLEdBQUcsQ0FBQyxJQUFJM0IscURBQVVBLENBQUM0Qiw4Q0FBc0MsRUFBWUEseUNBQTZDO1FBQzVJTixTQUFTVjtRQUNULE9BQU9BO0lBQ1g7SUFFQVAsZ0RBQVNBLENBQUM7UUFDTnFCO0lBQ0osR0FBRSxFQUFFO0lBRUosTUFBTWIsZ0JBQWdCLE9BQU9MO1FBQ3pCd0IsUUFBUUMsR0FBRyxDQUFDO1FBQ1piLGNBQWNaO1FBQ2QsTUFBTUUsWUFBWSxNQUFNd0IsT0FBT0MsT0FBTyxDQUFDM0IsV0FBVyxDQUFDNEIsTUFBTTtRQUN6RGYsYUFBYVg7UUFDYmdCLGtCQUFrQlcsSUFBSSxDQUFDLE9BQU96QjtZQUMxQkEsTUFBTTBCLFlBQVksQ0FBQzVCO1lBQ25CLE1BQU02QixVQUFVLE1BQU0zQixNQUFNNEIsTUFBTSxDQUFDRCxPQUFPO1lBQzVDLDRIQUE0SDtZQUMxSGQsaUJBQWlCYztZQUNqQmpCLFNBQVNWO1FBQ1Ysb0ZBQW9GO1FBQ25GLDhCQUE4QjtRQUNsQztRQUNBb0IsUUFBUUMsR0FBRyxDQUFDQztRQUNaWCxhQUFhO1FBQ2JrQixhQUFhQyxPQUFPLENBQUMsY0FBY2xDO1FBQ25DaUMsYUFBYUMsT0FBTyxDQUFDLGFBQWE7SUFDdEM7SUFFQSxNQUFNNUIsbUJBQW1CO1FBQ3JCa0IsUUFBUUMsR0FBRyxDQUFDO1FBQ1pWLGFBQWE7UUFDYkgsY0FBYztRQUNkSyxpQkFBaUI7UUFDakJKLGFBQWE7UUFDYm9CLGFBQWFFLFVBQVUsQ0FBQztRQUN4QkYsYUFBYUUsVUFBVSxDQUFDO0lBQzVCO0lBRUE7Ozs7T0FJRyxHQUVIdEMsZ0RBQVNBLENBQUM7UUFDTixNQUFNRyxhQUFhaUMsYUFBYUcsT0FBTyxDQUFDO1FBQ3hDLElBQUlwQyxZQUFhO1lBQ2JLLGNBQWNMO1FBQ2QsNEJBQTRCO1FBQ2hDO0lBQ0osR0FBRyxFQUFFO0lBSUwscUJBQ0ksOERBQUNELGNBQWNzQyxRQUFRO1FBQUNDLE9BQU87WUFBRXRDO1lBQVlFO1lBQVdFO1lBQU9DO1lBQWVGO1lBQVdHO1lBQWtCQztZQUFTTjtRQUFjO2tCQUM3SFU7Ozs7OztBQUdiLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcmNhbnVtLy4vY29udGV4dHMvV2FsbGV0Q29udGV4dC50c3g/ZTI0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCbG9ja2Zyb3N0LCBMdWNpZCwgV2FsbGV0QXBpIH0gZnJvbSBcImx1Y2lkLWNhcmRhbm9cIjtcclxuaW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcclxuaW1wb3J0IHsgZ2V0IH0gZnJvbSBcImh0dHBcIjtcclxuaW1wb3J0IHsgZ2V0Qm9va3NCeUFkZHJlc3MsIGdldENhcmRhbm9Bc3NldHNCeUFkZHJlc3MgfSBmcm9tIFwiQC91dGlscy9jYXJkYW5vXCI7XHJcbmltcG9ydCB7IEJvb2tCYWxhbmNlLCBUb2tlbkJhbGFuY2UgfSBmcm9tIFwiLi4vdHlwZXMvY2FyZGFub1wiO1xyXG5pbXBvcnQgeyBib29rUG9saWNpZXMgfSBmcm9tIFwiQC91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBXYWxsZXRDb250ZXh0ID0gY3JlYXRlQ29udGV4dDx7XHJcbiAgICB3YWxsZXROYW1lOiBzdHJpbmcsXHJcbiAgICB3YWxsZXRBZGRyZXNzOnN0cmluZyxcclxuICAgIHdhbGxldEFwaTogV2FsbGV0QXBpIHwgbnVsbCxcclxuICAgIGx1Y2lkOiBMdWNpZCB8IG51bGwsXHJcbiAgICBjb25uZWN0ZWQ6IGJvb2xlYW4sXHJcbiAgICBjb25uZWN0V2FsbGV0OiAod2FsbGV0TmFtZTogc3RyaW5nKSA9PiB2b2lkLFxyXG4gICAgZGlzY29ubmVjdFdhbGxldDogKCkgPT4gdm9pZCxcclxuICAgIGJhbGFuY2U6IEJvb2tCYWxhbmNlIHwgbnVsbFxyXG59Pih7XHJcbiAgICB3YWxsZXROYW1lOiBcIlwiLFxyXG4gICAgd2FsbGV0QWRkcmVzczpcIlwiLFxyXG4gICAgd2FsbGV0QXBpOiBudWxsLFxyXG4gICAgY29ubmVjdGVkOiBmYWxzZSxcclxuICAgIGx1Y2lkOiBudWxsLFxyXG4gICAgY29ubmVjdFdhbGxldDogKHdhbGxldE5hbWU6IHN0cmluZykgPT4geyB9LFxyXG4gICAgZGlzY29ubmVjdFdhbGxldDogKCkgPT4geyB9LFxyXG4gICAgYmFsYW5jZTogeyBiYWxhbmNlOiAwbiwgYm9va3M6W119XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZVdhbGxldENvbnRleHQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdXNlQ29udGV4dChXYWxsZXRDb250ZXh0KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBXYWxsZXRQcm92aWRlciA9ICh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSA9PiB7XHJcbiAgICBjb25zdCBbd2FsbGV0TmFtZSwgc2V0V2FsbGV0TmFtZV0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xyXG4gICAgY29uc3QgW3dhbGxldEFwaSwgc2V0V2FsbGV0QXBpXSA9IHVzZVN0YXRlPFdhbGxldEFwaSB8IG51bGw+KG51bGwpO1xyXG4gICAgY29uc3QgW2x1Y2lkLCBzZXRMdWNpZF0gPSB1c2VTdGF0ZTxMdWNpZCB8IG51bGw+KG51bGwpO1xyXG4gICAgY29uc3QgW2Nvbm5lY3RlZCwgc2V0Q29ubmVjdGVkXSA9IHVzZVN0YXRlPGJvb2xlYW4+KGZhbHNlKTtcclxuICAgIGNvbnN0IFtiYWxhbmNlLCBzZXRCYWxhbmNlXSA9IHVzZVN0YXRlPEJvb2tCYWxhbmNlIHwgbnVsbD4oeyBiYWxhbmNlOiAwbiwgYm9va3M6W10gfSk7XHJcbiAgICBjb25zdCBbd2FsbGV0QWRkcmVzcywgc2V0V2FsbGV0QWRkcmVzc10gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiXCIpO1xyXG4gICAgLy9jb25zdCB7IGxvZ291dDogd2ViM2F1dGhMb2dvdXQsIHdlYjNBdXRoQVBJLCB3YWxsZXRBZGRyZXNzLCBsb2dpbjogd2ViM2F1dGghLmZ1bGxMb2dpbiwgbG9nZ2VkSW4sIGdldEFjY291bnRzLCBnZXRCYWxhbmNlLCBpc0xvYWRpbmcgfSA9IHVzZVdlYjNBdXRoKCk7XHJcblxyXG4gICAgY29uc3QgaW5pdGlhbGl6ZUx1Y2lkID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGx1Y2lkID0gYXdhaXQgTHVjaWQubmV3KG5ldyBCbG9ja2Zyb3N0KHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JMT0NLRlJPU1RfVVJMIGFzIHN0cmluZywgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkxPQ0tGUk9TVF9QUk9KRUNUX0lEIGFzIHN0cmluZykpO1xyXG4gICAgICAgIHNldEx1Y2lkKGx1Y2lkKTtcclxuICAgICAgICByZXR1cm4gbHVjaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpPT57XHJcbiAgICAgICAgaW5pdGlhbGl6ZUx1Y2lkKCk7XHJcbiAgICB9LFtdKVxyXG5cclxuICAgIGNvbnN0IGNvbm5lY3RXYWxsZXQgPSBhc3luYyAod2FsbGV0TmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0aW5nIHdhbGxldFwiKVxyXG4gICAgICAgIHNldFdhbGxldE5hbWUod2FsbGV0TmFtZSk7XHJcbiAgICAgICAgY29uc3Qgd2FsbGV0QXBpID0gYXdhaXQgd2luZG93LmNhcmRhbm9bd2FsbGV0TmFtZV0uZW5hYmxlKCk7XHJcbiAgICAgICAgc2V0V2FsbGV0QXBpKHdhbGxldEFwaSk7XHJcbiAgICAgICAgaW5pdGlhbGl6ZUx1Y2lkKCkudGhlbihhc3luYyAobHVjaWQpID0+IHtcclxuICAgICAgICAgICAgbHVjaWQuc2VsZWN0V2FsbGV0KHdhbGxldEFwaSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3MgPSBhd2FpdCBsdWNpZC53YWxsZXQuYWRkcmVzcygpO1xyXG4gICAgICAgICAgLy8gY29uc3QgYWRkcmVzcyA9IFwiYWRkcjFxOHk0bGRnMmU1bnV5c3Q1dHk0Z2RwOGU2MmZna2d2N2NjNzNxZDdmMGY0ZTRtNDJkamFsOWw4dHBxenF3cXVhZTY5dDJkeWpkenNzN214bXJtbnd2N210aGQ0czgzN2Y1ZlwiXHJcbiAgICAgICAgICAgIHNldFdhbGxldEFkZHJlc3MoYWRkcmVzcyk7XHJcbiAgICAgICAgICAgIHNldEx1Y2lkKGx1Y2lkKTtcclxuICAgICAgICAgICAvLyBjb25zdCBjYXJkYW5vQmFsYW5jZSA9IGF3YWl0IGdldEJvb2tzQnlBZGRyZXNzKGFkZHJlc3MsIHtwb2xpY2llczpib29rUG9saWNpZXN9KTtcclxuICAgICAgICAgICAgLy9zZXRCYWxhbmNlKCBjYXJkYW5vQmFsYW5jZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cod2luZG93KVxyXG4gICAgICAgIHNldENvbm5lY3RlZCh0cnVlKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIndhbGxldE5hbWVcIiwgd2FsbGV0TmFtZSk7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb25uZWN0ZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpc2Nvbm5lY3RXYWxsZXQgPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJkaXNjb25uZWN0aW5nIHdhbGxldFwiKVxyXG4gICAgICAgIHNldENvbm5lY3RlZChmYWxzZSk7XHJcbiAgICAgICAgc2V0V2FsbGV0TmFtZShcIlwiKTtcclxuICAgICAgICBzZXRXYWxsZXRBZGRyZXNzKFwiXCIpO1xyXG4gICAgICAgIHNldFdhbGxldEFwaShudWxsKTtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShcIndhbGxldE5hbWVcIik7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJjb25uZWN0ZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLyogaWYoaXNXZWIzQXV0aE5vdEluc3RhbnRpYXRlZCB8fCAhd2ViM2F1dGgpIHJldHVybiAoXHJcbiAgICAgICAgPFdhbGxldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgd2FsbGV0TmFtZSwgd2FsbGV0QXBpLCBibG9ja2NoYWluLCBsdWNpZCwgY29ubmVjdFdhbGxldCwgY29ubmVjdGVkLCBhZGRyZXNzZXMsIGRpc2Nvbm5lY3RXYWxsZXQsIHNldEJsb2NrY2hhaW4sIGJhbGFuY2UgfX0+XHJcbiAgICAgICAgICAgIHtjaGlsZHJlbn1cclxuICAgICAgICA8L1dhbGxldENvbnRleHQuUHJvdmlkZXI+XHJcbiAgICApOyAqL1xyXG5cclxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAgICAgY29uc3Qgd2FsbGV0TmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwid2FsbGV0TmFtZVwiKTtcclxuICAgICAgICBpZiAod2FsbGV0TmFtZSApIHtcclxuICAgICAgICAgICAgY29ubmVjdFdhbGxldCh3YWxsZXROYW1lKTtcclxuICAgICAgICAgICAgLy9zZXRXYWxsZXROYW1lKHdhbGxldE5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sIFtdKVxyXG5cclxuICAgIFxyXG5cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPFdhbGxldENvbnRleHQuUHJvdmlkZXIgdmFsdWU9e3sgd2FsbGV0TmFtZSwgd2FsbGV0QXBpLCBsdWNpZCwgY29ubmVjdFdhbGxldCwgY29ubmVjdGVkLCBkaXNjb25uZWN0V2FsbGV0LCBiYWxhbmNlLCB3YWxsZXRBZGRyZXNzIH19PlxyXG4gICAgICAgICAgICB7Y2hpbGRyZW59XHJcbiAgICAgICAgPC9XYWxsZXRDb250ZXh0LlByb3ZpZGVyPlxyXG4gICAgKVxyXG59Il0sIm5hbWVzIjpbIkJsb2NrZnJvc3QiLCJMdWNpZCIsIlJlYWN0IiwiY3JlYXRlQ29udGV4dCIsInVzZUNvbnRleHQiLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsIldhbGxldENvbnRleHQiLCJ3YWxsZXROYW1lIiwid2FsbGV0QWRkcmVzcyIsIndhbGxldEFwaSIsImNvbm5lY3RlZCIsImx1Y2lkIiwiY29ubmVjdFdhbGxldCIsImRpc2Nvbm5lY3RXYWxsZXQiLCJiYWxhbmNlIiwiYm9va3MiLCJ1c2VXYWxsZXRDb250ZXh0IiwiV2FsbGV0UHJvdmlkZXIiLCJjaGlsZHJlbiIsInNldFdhbGxldE5hbWUiLCJzZXRXYWxsZXRBcGkiLCJzZXRMdWNpZCIsInNldENvbm5lY3RlZCIsInNldEJhbGFuY2UiLCJzZXRXYWxsZXRBZGRyZXNzIiwiaW5pdGlhbGl6ZUx1Y2lkIiwibmV3IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0JMT0NLRlJPU1RfVVJMIiwiTkVYVF9QVUJMSUNfQkxPQ0tGUk9TVF9QUk9KRUNUX0lEIiwiY29uc29sZSIsImxvZyIsIndpbmRvdyIsImNhcmRhbm8iLCJlbmFibGUiLCJ0aGVuIiwic2VsZWN0V2FsbGV0IiwiYWRkcmVzcyIsIndhbGxldCIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIlByb3ZpZGVyIiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./contexts/WalletContext.tsx\n");

/***/ }),

/***/ "./pages/_app.tsx":
/*!************************!*\
  !*** ./pages/_app.tsx ***!
  \************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _components_ui_ThemeProvider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/components/ui/ThemeProvider */ \"./components/ui/ThemeProvider.tsx\");\n/* harmony import */ var _contexts_BookContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/BookContext */ \"./contexts/BookContext.tsx\");\n/* harmony import */ var _contexts_WalletContext__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/contexts/WalletContext */ \"./contexts/WalletContext.tsx\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @tanstack/react-query */ \"@tanstack/react-query\");\n/* harmony import */ var sonner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! sonner */ \"sonner\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_contexts_BookContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_WalletContext__WEBPACK_IMPORTED_MODULE_3__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_5__, sonner__WEBPACK_IMPORTED_MODULE_6__]);\n([_contexts_BookContext__WEBPACK_IMPORTED_MODULE_2__, _contexts_WalletContext__WEBPACK_IMPORTED_MODULE_3__, _tanstack_react_query__WEBPACK_IMPORTED_MODULE_5__, sonner__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n\n\nfunction App({ Component, pageProps }) {\n    const queryClient = new _tanstack_react_query__WEBPACK_IMPORTED_MODULE_5__.QueryClient();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ui_ThemeProvider__WEBPACK_IMPORTED_MODULE_1__.ThemeProvider, {\n        attribute: \"class\",\n        defaultTheme: \"system\",\n        enableSystem: true,\n        disableTransitionOnChange: true,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tanstack_react_query__WEBPACK_IMPORTED_MODULE_5__.QueryClientProvider, {\n            client: queryClient,\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_WalletContext__WEBPACK_IMPORTED_MODULE_3__.WalletProvider, {\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_contexts_BookContext__WEBPACK_IMPORTED_MODULE_2__.BookProvider, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Component, {\n                            ...pageProps\n                        }, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n                            lineNumber: 22,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(sonner__WEBPACK_IMPORTED_MODULE_6__.Toaster, {}, void 0, false, {\n                            fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n                            lineNumber: 23,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n                    lineNumber: 21,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n                lineNumber: 20,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n            lineNumber: 19,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"C:\\\\Users\\\\rodrigo\\\\OneDrive\\\\Escritorio\\\\code_projects\\\\freelance\\\\take-a-book\\\\take-a-book\\\\frontend\\\\pages\\\\_app.tsx\",\n        lineNumber: 13,\n        columnNumber: 5\n    }, this);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUE4RDtBQUNSO0FBQ0k7QUFDNUI7QUFDMkM7QUFFeEM7QUFFbEIsU0FBU00sSUFBSSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBWTtJQUM1RCxNQUFNQyxjQUFjLElBQUlOLDhEQUFXQTtJQUVuQyxxQkFDRSw4REFBQ0gsdUVBQWFBO1FBQ1pVLFdBQVU7UUFDVkMsY0FBYTtRQUNiQyxZQUFZO1FBQ1pDLHlCQUF5QjtrQkFFekIsNEVBQUNULHNFQUFtQkE7WUFBQ1UsUUFBUUw7c0JBQzNCLDRFQUFDUCxtRUFBY0E7MEJBQ2IsNEVBQUNELCtEQUFZQTs7c0NBQ1gsOERBQUNNOzRCQUFXLEdBQUdDLFNBQVM7Ozs7OztzQ0FDeEIsOERBQUNILDJDQUFPQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcmNhbnVtLy4vcGFnZXMvX2FwcC50c3g/MmZiZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUaGVtZVByb3ZpZGVyIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9UaGVtZVByb3ZpZGVyXCI7XG5pbXBvcnQgeyBCb29rUHJvdmlkZXIgfSBmcm9tIFwiQC9jb250ZXh0cy9Cb29rQ29udGV4dFwiO1xuaW1wb3J0IHsgV2FsbGV0UHJvdmlkZXIgfSBmcm9tIFwiQC9jb250ZXh0cy9XYWxsZXRDb250ZXh0XCI7XG5pbXBvcnQgXCJAL3N0eWxlcy9nbG9iYWxzLmNzc1wiO1xuaW1wb3J0IHsgUXVlcnlDbGllbnQsIFF1ZXJ5Q2xpZW50UHJvdmlkZXIgfSBmcm9tIFwiQHRhbnN0YWNrL3JlYWN0LXF1ZXJ5XCI7XG5pbXBvcnQgdHlwZSB7IEFwcFByb3BzIH0gZnJvbSBcIm5leHQvYXBwXCI7XG5pbXBvcnQgeyBUb2FzdGVyIH0gZnJvbSBcInNvbm5lclwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoeyBDb21wb25lbnQsIHBhZ2VQcm9wcyB9OiBBcHBQcm9wcykge1xuICBjb25zdCBxdWVyeUNsaWVudCA9IG5ldyBRdWVyeUNsaWVudCgpXG5cbiAgcmV0dXJuIChcbiAgICA8VGhlbWVQcm92aWRlclxuICAgICAgYXR0cmlidXRlPVwiY2xhc3NcIlxuICAgICAgZGVmYXVsdFRoZW1lPVwic3lzdGVtXCJcbiAgICAgIGVuYWJsZVN5c3RlbVxuICAgICAgZGlzYWJsZVRyYW5zaXRpb25PbkNoYW5nZVxuICAgID5cbiAgICAgIDxRdWVyeUNsaWVudFByb3ZpZGVyIGNsaWVudD17cXVlcnlDbGllbnR9PlxuICAgICAgICA8V2FsbGV0UHJvdmlkZXI+XG4gICAgICAgICAgPEJvb2tQcm92aWRlcj5cbiAgICAgICAgICAgIDxDb21wb25lbnQgey4uLnBhZ2VQcm9wc30gLz5cbiAgICAgICAgICAgIDxUb2FzdGVyIC8+XG4gICAgICAgICAgPC9Cb29rUHJvdmlkZXI+XG4gICAgICAgIDwvV2FsbGV0UHJvdmlkZXI+XG4gICAgICA8L1F1ZXJ5Q2xpZW50UHJvdmlkZXI+XG4gICAgPC9UaGVtZVByb3ZpZGVyPlxuICApXG59XG4iXSwibmFtZXMiOlsiVGhlbWVQcm92aWRlciIsIkJvb2tQcm92aWRlciIsIldhbGxldFByb3ZpZGVyIiwiUXVlcnlDbGllbnQiLCJRdWVyeUNsaWVudFByb3ZpZGVyIiwiVG9hc3RlciIsIkFwcCIsIkNvbXBvbmVudCIsInBhZ2VQcm9wcyIsInF1ZXJ5Q2xpZW50IiwiYXR0cmlidXRlIiwiZGVmYXVsdFRoZW1lIiwiZW5hYmxlU3lzdGVtIiwiZGlzYWJsZVRyYW5zaXRpb25PbkNoYW5nZSIsImNsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/_app.tsx\n");

/***/ }),

/***/ "./utils/bookio.ts":
/*!*************************!*\
  !*** ./utils/bookio.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBookPolicies: () => (/* binding */ getBookPolicies)\n/* harmony export */ });\nconst getBookPolicies = async ()=>{\n    const response = await fetch(`api/getCollections`);\n    const data = await response.json();\n    return data;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9ib29raW8udHMiLCJtYXBwaW5ncyI6Ijs7OztBQUNPLE1BQU1BLGtCQUFrQjtJQUMzQixNQUFNQyxXQUFXLE1BQU1DLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztJQUNqRCxNQUFNQyxPQUFPLE1BQU1GLFNBQVNHLElBQUk7SUFDaEMsT0FBT0Q7QUFDWCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJjYW51bS8uL3V0aWxzL2Jvb2tpby50cz83NTczIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG5leHBvcnQgY29uc3QgZ2V0Qm9va1BvbGljaWVzID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgYXBpL2dldENvbGxlY3Rpb25zYCk7XHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgcmV0dXJuIGRhdGE7XHJcbn0iXSwibmFtZXMiOlsiZ2V0Qm9va1BvbGljaWVzIiwicmVzcG9uc2UiLCJmZXRjaCIsImRhdGEiLCJqc29uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/bookio.ts\n");

/***/ }),

/***/ "./utils/cardano.ts":
/*!**************************!*\
  !*** ./utils/cardano.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBooksByAddress: () => (/* binding */ getBooksByAddress),\n/* harmony export */   getCardanoAddressInfo: () => (/* binding */ getCardanoAddressInfo),\n/* harmony export */   getCardanoAssetsByAddress: () => (/* binding */ getCardanoAssetsByAddress),\n/* harmony export */   tokenNameFromAssetName: () => (/* binding */ tokenNameFromAssetName),\n/* harmony export */   tokenNameFromUnit: () => (/* binding */ tokenNameFromUnit)\n/* harmony export */ });\n/* harmony import */ var lucid_cardano__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lucid-cardano */ \"lucid-cardano\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lucid_cardano__WEBPACK_IMPORTED_MODULE_0__]);\nlucid_cardano__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst tokenNameFromUnit = (unit)=>unit === \"lovelace\" ? \"ADA\" : tokenNameFromAssetName(unit.replace(unit.slice(0, 56), \"\")) //Buffer.from(unit.replace(unit.slice(0, 56), \"\"), \"hex\").toString(\"ascii\")\n;\nconst tokenNameFromAssetName = (assetName)=>assetName == \"lovelace\" ? \"ADA \" : (()=>{\n        const label = (0,lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.fromLabel)(assetName.slice(0, 8));\n        const name = (()=>{\n            const hexName = Number.isInteger(label) ? Buffer.from(assetName.slice(8), \"hex\").toString(\"ascii\") : Buffer.from(assetName, \"hex\").toString(\"ascii\");\n            return hexName || null;\n        })();\n        return Number.isInteger(label) ? `(${label}) ${name}` : name;\n    //Buffer.from(assetName, \"hex\").toString(\"ascii\")\n    })();\nconst getCardanoAddressInfo = async (address)=>{\n    const result = await fetch(`${\"https://cardano-mainnet.blockfrost.io/api/v0\"}/addresses/${address}`, {\n        headers: {\n            project_id: \"mainnetRYnsFXoxIeqmPhpUcHmS91I0DfADfJon\",\n            \"Content-Type\": \"application/json\"\n        }\n    }).then((res)=>res.json());\n    if (result.error) {\n        if (result.status_code === 400) throw new Error(\"Invalid Request\");\n        else if (result.status_code === 500) throw new Error(\"Internal Error\");\n        else {\n            return {\n                address: address,\n                amount: [],\n                stake_address: \"\",\n                type: \"byron\",\n                script: false\n            };\n        }\n    // else return Buffer.from(C.Value.new(C.BigNum.from_str('0')).to_bytes()).toString('hex');\n    }\n    return result;\n};\nconst convertMetadataPropToString = (src)=>{\n    if (typeof src === \"string\") return src;\n    else if (Array.isArray(src)) return src.join(\"\");\n    return null;\n};\nconst linkToSrc = (link, base64 = false)=>{\n    const base64regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n    if (link.startsWith(\"https://\")) return link;\n    else if (link.startsWith(\"ipfs://\")) return \"https://ipfs.io/ipfs/\" + link.split(\"ipfs://\")[1].split(\"ipfs/\").slice(-1)[0];\n    else if (link.startsWith(\"Qm\") && link.length === 46 || link.startsWith(\"baf\") && link.length === 59) {\n        return \"https://ipfs.io/ipfs/\" + link;\n    } else if (base64 && base64regex.test(link)) return \"data:image/png;base64,\" + link;\n    else if (link.startsWith(\"data:image\")) return link;\n    return null;\n};\nconst fromAssetUnit = (unit)=>{\n    const policyId = unit.slice(0, 56);\n    const label = (0,lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.fromLabel)(unit.slice(56, 64));\n    const name = (()=>{\n        const hexName = Number.isInteger(label) ? unit.slice(64) : unit.slice(56);\n        return unit.length === 56 ? \"\" : hexName || null;\n    })();\n    return {\n        policyId,\n        name,\n        label\n    };\n};\nasync function batchProcess(items, batchSize, processFunction) {\n    let result = [];\n    for(let i = 0; i < items.length; i += batchSize){\n        const batch = items.slice(i, i + batchSize);\n        const batchResults = await Promise.all(batch.map((item)=>processFunction(item)));\n        result = result.concat(batchResults);\n    }\n    return result;\n}\nconst getCardanoAssetsByAddress = async (address, options)=>{\n    const allNFTs = [];\n    const ignoreDetails = options && options.ignoreDetails ? options.ignoreDetails : false;\n    const page = options && options.page ? options.page : 1;\n    const pageLength = options && options.pageLength ? options.pageLength : 30;\n    var addressInfo = {\n        NFTs: [],\n        FTs: []\n    };\n    const data = await getCardanoAddressInfo(address);\n    if (data && data.amount && data.amount.length > 0) {\n        const fungible = [];\n        const NFT = [];\n        const batchSize = 5; // Adjust the batch size according to the rate limit\n        const slicedData = options && options.page ? data.amount.slice((page - 1) * (pageLength || 30), page * (pageLength || 30)) : data.amount;\n        const assetDetailsPromises = slicedData?.filter((asset)=>asset.unit !== \"lovelace\" && !ignoreDetails).filter((asset)=>!options?.policies || options.policies.includes(asset.unit.slice(0, 56))).map((asset)=>()=>fetch(`${\"https://cardano-mainnet.blockfrost.io/api/v0\"}/assets/${asset.unit}`, {\n                    headers: {\n                        project_id: \"mainnetRYnsFXoxIeqmPhpUcHmS91I0DfADfJon\",\n                        \"Content-Type\": \"application/json\"\n                    }\n                }).then((res)=>res.json()).catch((e)=>console.log(\"error fetching asset\", e)));\n        const assetDetails = await batchProcess(assetDetailsPromises, batchSize, (promise)=>promise());\n        for(let i = 0; i < assetDetails.length; i++){\n            const asset = assetDetails[i];\n            // const asset = data.amount[i];\n            if (asset) {\n                const { policyId, name, label } = fromAssetUnit(asset.asset);\n                const hasNFTOnchainMetadata = asset.onchain_metadata && (asset.onchain_metadata.version === 2 && asset.onchain_metadata?.[`0x${policyId}`]?.[`0x${name}`] || asset.onchain_metadata);\n                const meta = asset.onchain_metadata;\n                const isNFT = Number(asset.quantity) == 1 && hasNFTOnchainMetadata && !label || label === 222;\n                const isFungible = asset.mint_or_burn_count > 1 || !asset.onchain_metadata?.image;\n                const image = meta && meta.image && linkToSrc(convertMetadataPropToString(meta.image) || \"\") || asset.metadata && asset.metadata.logo && linkToSrc(asset.metadata.logo, true) || \"\";\n                (!isNFT ? fungible : NFT).push({\n                    amount: BigInt(data.amount.find((a)=>a.unit === asset.asset)?.quantity || 0),\n                    existingAmount: BigInt(asset.quantity),\n                    name: tokenNameFromAssetName(asset.asset_name || \"\"),\n                    tokenId: asset.asset,\n                    metadata: {\n                        image,\n                        name: meta?.extraAttributes[\"Book Title\"] || asset.metadata?.name || meta?.name,\n                        description: asset.metadata?.description || meta?.description,\n                        authors: asset.metadata?.authors || meta?.authors || []\n                    },\n                    decimals: asset.metadata?.decimals,\n                    symbol: asset.metadata?.ticker ? asset.metadata?.ticker : meta?.symbol ? meta?.symbol : tokenNameFromAssetName(asset.asset_name || \"\")\n                });\n            /* if (meta) {\r\n                    allNFTs.push(asset);\r\n                } */ }\n        }\n        addressInfo.NFTs = NFT;\n        addressInfo.FTs = fungible;\n        const lovelaceAsset = data.amount.find((asset)=>asset.unit === \"lovelace\");\n        if (lovelaceAsset) {\n            addressInfo.balance = BigInt(lovelaceAsset.quantity);\n        }\n    }\n    /* const count = data.amount? data.amount.length : 0\r\n    addressInfo.count = count */ console.log({\n        addressInfo\n    });\n    return addressInfo;\n};\nconst getBooksByAddress = async (address, options)=>{\n    const allNFTs = [];\n    const ignoreDetails = options && options.ignoreDetails ? options.ignoreDetails : false;\n    const page = options && options.page ? options.page : 1;\n    const pageLength = options && options.pageLength ? options.pageLength : 30;\n    var addressInfo = {\n        books: []\n    };\n    const data = await getCardanoAddressInfo(address);\n    if (data && data.amount && data.amount.length > 0) {\n        const books = [];\n        const batchSize = 5; // Adjust the batch size according to the rate limit\n        let slicedData = data.amount.filter((asset)=>asset.unit != \"lovelace\" && (!options?.policies || options.policies.includes(asset.unit.slice(0, 56))));\n        const booksWithUniquePolicy = slicedData.reduce((acc, asset)=>{\n            if (!acc.find((a)=>a.unit.slice(0, 56) === asset.unit.slice(0, 56))) {\n                acc.push(asset);\n            } else {\n                //find the asset with the same policy and add the quantity to the existing one\n                const existingAsset = acc.find((a)=>a.unit.slice(0, 56) === asset.unit.slice(0, 56));\n                existingAsset.quantity = (BigInt(existingAsset.quantity) + BigInt(asset.quantity)).toString().replace(/^0+/, \"\");\n            }\n            return acc;\n        }, []);\n        const slicedBooksWithUniquePolicy = options && options.page ? booksWithUniquePolicy.slice((page - 1) * (pageLength || 30), page * (pageLength || 30)) : booksWithUniquePolicy;\n        // slicedData = slicedData\n        const assetDetailsPromises = slicedBooksWithUniquePolicy.map((asset)=>()=>fetch(`${\"https://cardano-mainnet.blockfrost.io/api/v0\"}/assets/${asset.unit}`, {\n                    headers: {\n                        project_id: \"mainnetRYnsFXoxIeqmPhpUcHmS91I0DfADfJon\",\n                        \"Content-Type\": \"application/json\"\n                    }\n                }).then((res)=>res.json()).catch((e)=>console.log(\"error fetching asset\", e)));\n        const assetDetails = await batchProcess(assetDetailsPromises, batchSize, (promise)=>promise());\n        for(let i = 0; i < assetDetails.length; i++){\n            const asset = assetDetails[i];\n            // const asset = data.amount[i];\n            if (asset) {\n                const { policyId, name, label } = fromAssetUnit(asset.asset);\n                const meta = asset.onchain_metadata;\n                const image = meta && meta.image && linkToSrc(convertMetadataPropToString(meta.image) || \"\") || asset.metadata && asset.metadata.logo && linkToSrc(asset.metadata.logo, true) || \"\";\n                books.push({\n                    amount: BigInt(data.amount.find((a)=>a.unit === asset.asset)?.quantity || 0),\n                    existingAmount: BigInt(asset.quantity),\n                    name: tokenNameFromAssetName(asset.asset_name || \"\"),\n                    tokenId: asset.asset,\n                    metadata: {\n                        image,\n                        name: meta.extraAttributes ? meta?.extraAttributes[\"Book Title\"] : asset.metadata?.name || meta?.name,\n                        description: asset.metadata?.description || meta?.description,\n                        authors: asset.metadata?.authors || meta?.authors || []\n                    },\n                    decimals: asset.metadata?.decimals,\n                    symbol: asset.metadata?.ticker ? asset.metadata?.ticker : meta?.symbol ? meta?.symbol : tokenNameFromAssetName(asset.asset_name || \"\")\n                });\n            }\n        }\n        addressInfo.books = books;\n        const lovelaceAsset = data.amount.find((asset)=>asset.unit === \"lovelace\");\n        if (lovelaceAsset) {\n            addressInfo.balance = BigInt(lovelaceAsset.quantity);\n        }\n    }\n    /* const count = data.amount? data.amount.length : 0\r\n    addressInfo.count = count */ console.log({\n        addressInfo\n    });\n    return addressInfo;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQSxLQUFLO29CQUNwQmtCLFVBQVU7d0JBQUVEO3dCQUFPdEYsTUFBTWlGLEtBQUtlLGVBQWUsR0FBR2YsTUFBTWUsZUFBZSxDQUFDLGFBQWEsR0FBRzNCLE1BQU1rQixRQUFRLEVBQUV2RixRQUFRaUYsTUFBTWpGO3dCQUFNaUcsYUFBYTVCLE1BQU1rQixRQUFRLEVBQUVVLGVBQWVoQixNQUFNZ0I7d0JBQWFDLFNBQVM3QixNQUFNa0IsUUFBUSxFQUFFVyxXQUFXakIsTUFBTWlCLFdBQVcsRUFBRTtvQkFBRTtvQkFDbFBDLFVBQVU5QixNQUFNa0IsUUFBUSxFQUFFWTtvQkFDMUJDLFFBQVEvQixNQUFNa0IsUUFBUSxFQUFFYyxTQUFTaEMsTUFBTWtCLFFBQVEsRUFBRWMsU0FBU3BCLE1BQU1tQixTQUFTbkIsTUFBTW1CLFNBQVN6Ryx1QkFBdUIwRSxNQUFNeUIsVUFBVSxJQUFJO2dCQUV2STtZQUVKO1FBRUo7UUFDQWxDLFlBQVk2QyxLQUFLLEdBQUdBO1FBQ3BCLE1BQU1ILGdCQUFnQnZDLEtBQUt4QyxNQUFNLENBQUNvRSxJQUFJLENBQUMsQ0FBQ3RCLFFBQWVBLE1BQU0zRSxJQUFJLEtBQUs7UUFDdEUsSUFBSTRHLGVBQWU7WUFDZjFDLFlBQVkyQyxPQUFPLEdBQUdiLE9BQU9ZLGNBQWNuQixRQUFRO1FBQ3ZEO0lBQ0o7SUFDQTs4QkFDMEIsR0FDMUJULFFBQVFDLEdBQUcsQ0FBQztRQUFFZjtJQUFZO0lBQzFCLE9BQU9BO0FBQ1gsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FyY2FudW0vLi91dGlscy9jYXJkYW5vLnRzPzdmMGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9va0JhbGFuY2UsIENhcmRhbm9BZGRyZXNzSW5mbywgVG9rZW5CYWxhbmNlLCBUb2tlbkluZm8gfSBmcm9tIFwiLi4vdHlwZXMvY2FyZGFub1wiXHJcbmltcG9ydCB7IGZyb21MYWJlbCB9IGZyb20gJ2x1Y2lkLWNhcmRhbm8nXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCB0b2tlbk5hbWVGcm9tVW5pdCA9ICh1bml0OiBzdHJpbmcpID0+IHVuaXQgPT09ICdsb3ZlbGFjZScgPyAnQURBJyA6IHRva2VuTmFtZUZyb21Bc3NldE5hbWUodW5pdC5yZXBsYWNlKHVuaXQuc2xpY2UoMCwgNTYpLCBcIlwiKSkvL0J1ZmZlci5mcm9tKHVuaXQucmVwbGFjZSh1bml0LnNsaWNlKDAsIDU2KSwgXCJcIiksIFwiaGV4XCIpLnRvU3RyaW5nKFwiYXNjaWlcIilcclxuZXhwb3J0IGNvbnN0IHRva2VuTmFtZUZyb21Bc3NldE5hbWUgPSAoYXNzZXROYW1lOiBzdHJpbmcpID0+IGFzc2V0TmFtZSA9PSAnbG92ZWxhY2UnID8gJ0FEQSAnIDogKCgpID0+IHtcclxuICAgIGNvbnN0IGxhYmVsID0gZnJvbUxhYmVsKGFzc2V0TmFtZS5zbGljZSgwLCA4KSk7XHJcbiAgICBjb25zdCBuYW1lID0gKCgpID0+IHtcclxuICAgICAgICBjb25zdCBoZXhOYW1lID0gTnVtYmVyLmlzSW50ZWdlcihsYWJlbCkgPyBCdWZmZXIuZnJvbShhc3NldE5hbWUuc2xpY2UoOCksIFwiaGV4XCIpLnRvU3RyaW5nKFwiYXNjaWlcIikgOiBCdWZmZXIuZnJvbShhc3NldE5hbWUsIFwiaGV4XCIpLnRvU3RyaW5nKFwiYXNjaWlcIik7XHJcbiAgICAgICAgcmV0dXJuIGhleE5hbWUgfHwgbnVsbDtcclxuICAgIH0pKCk7XHJcbiAgICByZXR1cm4gTnVtYmVyLmlzSW50ZWdlcihsYWJlbCkgPyBgKCR7bGFiZWx9KSAke25hbWV9YCA6IG5hbWVcclxuICAgIC8vQnVmZmVyLmZyb20oYXNzZXROYW1lLCBcImhleFwiKS50b1N0cmluZyhcImFzY2lpXCIpXHJcbn0pKClcclxuXHJcblxyXG5leHBvcnQgY29uc3QgZ2V0Q2FyZGFub0FkZHJlc3NJbmZvID0gYXN5bmMgKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8Q2FyZGFub0FkZHJlc3NJbmZvPiA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBmZXRjaChcclxuICAgICAgICBgJHtwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CTE9DS0ZST1NUX1VSTH0vYWRkcmVzc2VzLyR7YWRkcmVzc31gLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgcHJvamVjdF9pZDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkxPQ0tGUk9TVF9QUk9KRUNUX0lEIGFzIHN0cmluZyxcclxuICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICApLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSk7XHJcblxyXG4gICAgaWYgKHJlc3VsdC5lcnJvcikge1xyXG4gICAgICAgIGlmIChyZXN1bHQuc3RhdHVzX2NvZGUgPT09IDQwMCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBSZXF1ZXN0XCIpO1xyXG4gICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXNfY29kZSA9PT0gNTAwKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm5hbCBFcnJvclwiKTtcclxuICAgICAgICAvLyBlbHNlIGFkZHJlc3Mgbm90IGZvdW5kIGJlY2F1c2UgaXQncyBhIG5ldyBhZGRyZXNzXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiBhZGRyZXNzLFxyXG4gICAgICAgICAgICAgICAgYW1vdW50OiBbXSxcclxuICAgICAgICAgICAgICAgIHN0YWtlX2FkZHJlc3M6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImJ5cm9uXCIsXHJcbiAgICAgICAgICAgICAgICBzY3JpcHQ6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZWxzZSByZXR1cm4gQnVmZmVyLmZyb20oQy5WYWx1ZS5uZXcoQy5CaWdOdW0uZnJvbV9zdHIoJzAnKSkudG9fYnl0ZXMoKSkudG9TdHJpbmcoJ2hleCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG59XHJcblxyXG5cclxuY29uc3QgY29udmVydE1ldGFkYXRhUHJvcFRvU3RyaW5nID0gKHNyYzogYW55KSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHNyYyA9PT0gJ3N0cmluZycpIHJldHVybiBzcmM7XHJcbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHNyYykpIHJldHVybiBzcmMuam9pbignJyk7XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmNvbnN0IGxpbmtUb1NyYyA9IChsaW5rOiBzdHJpbmcsIGJhc2U2NCA9IGZhbHNlKSA9PiB7XHJcbiAgICBjb25zdCBiYXNlNjRyZWdleCA9XHJcbiAgICAgICAgL14oWzAtOWEtekEtWisvXXs0fSkqKChbMC05YS16QS1aKy9dezJ9PT0pfChbMC05YS16QS1aKy9dezN9PSkpPyQvO1xyXG4gICAgaWYgKGxpbmsuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSkgcmV0dXJuIGxpbms7XHJcbiAgICBlbHNlIGlmIChsaW5rLnN0YXJ0c1dpdGgoJ2lwZnM6Ly8nKSlcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICAnaHR0cHM6Ly9pcGZzLmlvL2lwZnMvJyArXHJcbiAgICAgICAgICAgIGxpbmsuc3BsaXQoJ2lwZnM6Ly8nKVsxXS5zcGxpdCgnaXBmcy8nKS5zbGljZSgtMSlbMF1cclxuICAgICAgICApO1xyXG4gICAgZWxzZSBpZiAoXHJcbiAgICAgICAgKGxpbmsuc3RhcnRzV2l0aCgnUW0nKSAmJiBsaW5rLmxlbmd0aCA9PT0gNDYpIHx8XHJcbiAgICAgICAgKGxpbmsuc3RhcnRzV2l0aCgnYmFmJykgJiYgbGluay5sZW5ndGggPT09IDU5KVxyXG4gICAgKSB7XHJcbiAgICAgICAgcmV0dXJuICdodHRwczovL2lwZnMuaW8vaXBmcy8nICsgbGluaztcclxuICAgIH0gZWxzZSBpZiAoYmFzZTY0ICYmIGJhc2U2NHJlZ2V4LnRlc3QobGluaykpXHJcbiAgICAgICAgcmV0dXJuICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIGxpbms7XHJcbiAgICBlbHNlIGlmIChsaW5rLnN0YXJ0c1dpdGgoJ2RhdGE6aW1hZ2UnKSkgcmV0dXJuIGxpbms7XHJcbiAgICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcblxyXG5jb25zdCBmcm9tQXNzZXRVbml0ID0gKHVuaXQ6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgcG9saWN5SWQgPSB1bml0LnNsaWNlKDAsIDU2KTtcclxuICAgIGNvbnN0IGxhYmVsID0gZnJvbUxhYmVsKHVuaXQuc2xpY2UoNTYsIDY0KSk7XHJcbiAgICBjb25zdCBuYW1lID0gKCgpID0+IHtcclxuICAgICAgICBjb25zdCBoZXhOYW1lID0gTnVtYmVyLmlzSW50ZWdlcihsYWJlbCkgPyB1bml0LnNsaWNlKDY0KSA6IHVuaXQuc2xpY2UoNTYpO1xyXG4gICAgICAgIHJldHVybiB1bml0Lmxlbmd0aCA9PT0gNTYgPyAnJyA6IGhleE5hbWUgfHwgbnVsbDtcclxuICAgIH0pKCk7XHJcbiAgICByZXR1cm4geyBwb2xpY3lJZCwgbmFtZSwgbGFiZWwgfTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gYmF0Y2hQcm9jZXNzKGl0ZW1zOiBhbnksIGJhdGNoU2l6ZTogbnVtYmVyLCBwcm9jZXNzRnVuY3Rpb246IGFueSkge1xyXG4gICAgbGV0IHJlc3VsdDogYW55ID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcclxuICAgICAgICBjb25zdCBiYXRjaCA9IGl0ZW1zLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xyXG4gICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKGJhdGNoLm1hcCgoaXRlbTogYW55KSA9PiBwcm9jZXNzRnVuY3Rpb24oaXRlbSkpKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGJhdGNoUmVzdWx0cyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmV4cG9ydCBjb25zdCBnZXRDYXJkYW5vQXNzZXRzQnlBZGRyZXNzID0gYXN5bmMgKGFkZHJlc3M6IHN0cmluZywgb3B0aW9ucz86IHsgaWdub3JlRGV0YWlscz86IGJvb2xlYW4sIHBhZ2U/OiBudW1iZXIsIHBhZ2VMZW5ndGg/OiBudW1iZXIsIHBvbGljaWVzPzogc3RyaW5nW10gfSkgPT4ge1xyXG4gICAgY29uc3QgYWxsTkZUczogYW55ID0gW11cclxuICAgIGNvbnN0IGlnbm9yZURldGFpbHMgPSBvcHRpb25zICYmIG9wdGlvbnMuaWdub3JlRGV0YWlscyA/IG9wdGlvbnMuaWdub3JlRGV0YWlscyA6IGZhbHNlXHJcbiAgICBjb25zdCBwYWdlID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2UgPyBvcHRpb25zLnBhZ2UgOiAxXHJcbiAgICBjb25zdCBwYWdlTGVuZ3RoID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2VMZW5ndGggPyBvcHRpb25zLnBhZ2VMZW5ndGggOiAzMFxyXG4gICAgdmFyIGFkZHJlc3NJbmZvOiBUb2tlbkJhbGFuY2UgPSB7IE5GVHM6IFtdLCBGVHM6IFtdIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0Q2FyZGFub0FkZHJlc3NJbmZvKGFkZHJlc3MpXHJcbiAgICBpZiAoZGF0YSAmJiBkYXRhLmFtb3VudCAmJiBkYXRhLmFtb3VudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZnVuZ2libGU6IFRva2VuSW5mb1tdID0gW107XHJcbiAgICAgICAgY29uc3QgTkZUOiBUb2tlbkluZm9bXSA9IFtdO1xyXG5cclxuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSA1OyAvLyBBZGp1c3QgdGhlIGJhdGNoIHNpemUgYWNjb3JkaW5nIHRvIHRoZSByYXRlIGxpbWl0XHJcbiAgICAgICAgY29uc3Qgc2xpY2VkRGF0YSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5wYWdlID8gZGF0YS5hbW91bnQuc2xpY2UoKHBhZ2UgLSAxKSAqIChwYWdlTGVuZ3RoIHx8IDMwKSwgcGFnZSAqIChwYWdlTGVuZ3RoIHx8IDMwKSkgOiBkYXRhLmFtb3VudFxyXG4gICAgICAgIGNvbnN0IGFzc2V0RGV0YWlsc1Byb21pc2VzID0gc2xpY2VkRGF0YT8uZmlsdGVyKChhc3NldDogYW55KSA9PiBhc3NldC51bml0ICE9PSAnbG92ZWxhY2UnICYmICFpZ25vcmVEZXRhaWxzKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChhc3NldDogYW55KSA9PiAhb3B0aW9ucz8ucG9saWNpZXMgfHwgb3B0aW9ucy5wb2xpY2llcy5pbmNsdWRlcyhhc3NldC51bml0LnNsaWNlKDAsIDU2KSkpXHJcbiAgICAgICAgICAgIC5tYXAoKGFzc2V0OiBhbnkpID0+ICgpID0+IGZldGNoKGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JMT0NLRlJPU1RfVVJMfS9hc3NldHMvJHthc3NldC51bml0fWAsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0X2lkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CTE9DS0ZST1NUX1BST0pFQ1RfSUQgYXMgc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSkuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhcImVycm9yIGZldGNoaW5nIGFzc2V0XCIsIGUpKSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFzc2V0RGV0YWlscyA9IGF3YWl0IGJhdGNoUHJvY2Vzcyhhc3NldERldGFpbHNQcm9taXNlcywgYmF0Y2hTaXplLCAocHJvbWlzZTogYW55KSA9PiBwcm9taXNlKCkpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXNzZXREZXRhaWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXREZXRhaWxzW2ldO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBhc3NldCA9IGRhdGEuYW1vdW50W2ldO1xyXG4gICAgICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcG9saWN5SWQsIG5hbWUsIGxhYmVsIH0gPSBmcm9tQXNzZXRVbml0KGFzc2V0LmFzc2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc05GVE9uY2hhaW5NZXRhZGF0YSA9IGFzc2V0Lm9uY2hhaW5fbWV0YWRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAoKGFzc2V0Lm9uY2hhaW5fbWV0YWRhdGEudmVyc2lvbiA9PT0gMiAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5vbmNoYWluX21ldGFkYXRhPy5bYDB4JHtwb2xpY3lJZH1gXT8uW2AweCR7bmFtZX1gXSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQub25jaGFpbl9tZXRhZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXRhID0gYXNzZXQub25jaGFpbl9tZXRhZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc05GVCA9IE51bWJlcihhc3NldC5xdWFudGl0eSkgPT0gMSAmJiAoaGFzTkZUT25jaGFpbk1ldGFkYXRhICYmICFsYWJlbCkgfHwgbGFiZWwgPT09IDIyMjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzRnVuZ2libGUgPSBhc3NldC5taW50X29yX2J1cm5fY291bnQgPiAxIHx8ICFhc3NldC5vbmNoYWluX21ldGFkYXRhPy5pbWFnZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKG1ldGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0YS5pbWFnZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rVG9TcmMoY29udmVydE1ldGFkYXRhUHJvcFRvU3RyaW5nKG1ldGEuaW1hZ2UpIHx8ICcnKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoYXNzZXQubWV0YWRhdGEgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXQubWV0YWRhdGEubG9nbyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rVG9TcmMoYXNzZXQubWV0YWRhdGEubG9nbywgdHJ1ZSkpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgJyc7XHJcbiAgICAgICAgICAgICAgICAoIWlzTkZUID8gZnVuZ2libGUgOiBORlQpLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGFtb3VudDogQmlnSW50KGRhdGEuYW1vdW50LmZpbmQoKGE6IGFueSkgPT4gYS51bml0ID09PSBhc3NldC5hc3NldCk/LnF1YW50aXR5IHx8IDApLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nQW1vdW50OiBCaWdJbnQoYXNzZXQucXVhbnRpdHkpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRva2VuTmFtZUZyb21Bc3NldE5hbWUoYXNzZXQuYXNzZXRfbmFtZSB8fCBcIlwiKSEsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5JZDogYXNzZXQuYXNzZXQsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHsgaW1hZ2UsIG5hbWU6IG1ldGE/LmV4dHJhQXR0cmlidXRlc1tcIkJvb2sgVGl0bGVcIl0gfHwgYXNzZXQubWV0YWRhdGE/Lm5hbWUgfHwgbWV0YT8ubmFtZSwgZGVzY3JpcHRpb246IGFzc2V0Lm1ldGFkYXRhPy5kZXNjcmlwdGlvbiB8fCBtZXRhPy5kZXNjcmlwdGlvbiwgYXV0aG9yczogYXNzZXQubWV0YWRhdGE/LmF1dGhvcnMgfHwgbWV0YT8uYXV0aG9ycyB8fCBbXSwgfSxcclxuICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogYXNzZXQubWV0YWRhdGE/LmRlY2ltYWxzLFxyXG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbDogYXNzZXQubWV0YWRhdGE/LnRpY2tlciA/IGFzc2V0Lm1ldGFkYXRhPy50aWNrZXIgOiBtZXRhPy5zeW1ib2wgPyBtZXRhPy5zeW1ib2wgOiB0b2tlbk5hbWVGcm9tQXNzZXROYW1lKGFzc2V0LmFzc2V0X25hbWUgfHwgXCJcIikhLFxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qIGlmIChtZXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxsTkZUcy5wdXNoKGFzc2V0KTtcclxuICAgICAgICAgICAgICAgIH0gKi9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYWRkcmVzc0luZm8uTkZUcyA9IE5GVFxyXG4gICAgICAgIGFkZHJlc3NJbmZvLkZUcyA9IGZ1bmdpYmxlXHJcbiAgICAgICAgY29uc3QgbG92ZWxhY2VBc3NldCA9IGRhdGEuYW1vdW50LmZpbmQoKGFzc2V0OiBhbnkpID0+IGFzc2V0LnVuaXQgPT09ICdsb3ZlbGFjZScpO1xyXG4gICAgICAgIGlmIChsb3ZlbGFjZUFzc2V0KSB7XHJcbiAgICAgICAgICAgIGFkZHJlc3NJbmZvLmJhbGFuY2UgPSBCaWdJbnQobG92ZWxhY2VBc3NldC5xdWFudGl0eSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIC8qIGNvbnN0IGNvdW50ID0gZGF0YS5hbW91bnQ/IGRhdGEuYW1vdW50Lmxlbmd0aCA6IDBcclxuICAgIGFkZHJlc3NJbmZvLmNvdW50ID0gY291bnQgKi9cclxuICAgIGNvbnNvbGUubG9nKHsgYWRkcmVzc0luZm8gfSk7XHJcbiAgICByZXR1cm4gYWRkcmVzc0luZm87XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGdldEJvb2tzQnlBZGRyZXNzID0gYXN5bmMgKGFkZHJlc3M6IHN0cmluZywgb3B0aW9ucz86IHsgaWdub3JlRGV0YWlscz86IGJvb2xlYW4sIHBhZ2U/OiBudW1iZXIsIHBhZ2VMZW5ndGg/OiBudW1iZXIsIHBvbGljaWVzPzogc3RyaW5nW10gfSkgPT4ge1xyXG4gICAgY29uc3QgYWxsTkZUczogYW55ID0gW11cclxuICAgIGNvbnN0IGlnbm9yZURldGFpbHMgPSBvcHRpb25zICYmIG9wdGlvbnMuaWdub3JlRGV0YWlscyA/IG9wdGlvbnMuaWdub3JlRGV0YWlscyA6IGZhbHNlXHJcbiAgICBjb25zdCBwYWdlID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2UgPyBvcHRpb25zLnBhZ2UgOiAxXHJcbiAgICBjb25zdCBwYWdlTGVuZ3RoID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2VMZW5ndGggPyBvcHRpb25zLnBhZ2VMZW5ndGggOiAzMFxyXG4gICAgdmFyIGFkZHJlc3NJbmZvOiBCb29rQmFsYW5jZSA9IHsgYm9va3M6IFtdIH1cclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRDYXJkYW5vQWRkcmVzc0luZm8oYWRkcmVzcylcclxuICAgIGlmIChkYXRhICYmIGRhdGEuYW1vdW50ICYmIGRhdGEuYW1vdW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBib29rczogVG9rZW5JbmZvW10gPSBbXTtcclxuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSA1OyAvLyBBZGp1c3QgdGhlIGJhdGNoIHNpemUgYWNjb3JkaW5nIHRvIHRoZSByYXRlIGxpbWl0XHJcbiAgICAgICAgbGV0IHNsaWNlZERhdGEgPSBkYXRhLmFtb3VudFxyXG4gICAgICAgICAgICAuZmlsdGVyKChhc3NldDogYW55KSA9PiBhc3NldC51bml0ICE9IFwibG92ZWxhY2VcIiAmJiAoIW9wdGlvbnM/LnBvbGljaWVzIHx8IG9wdGlvbnMucG9saWNpZXMuaW5jbHVkZXMoYXNzZXQudW5pdC5zbGljZSgwLCA1NikgKSkpXHJcblxyXG4gICAgICAgIGNvbnN0IGJvb2tzV2l0aFVuaXF1ZVBvbGljeSA9IHNsaWNlZERhdGEucmVkdWNlKChhY2M6IGFueSwgYXNzZXQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWFjYy5maW5kKChhOiBhbnkpID0+IGEudW5pdC5zbGljZSgwLCA1NikgPT09IGFzc2V0LnVuaXQuc2xpY2UoMCwgNTYpKSkge1xyXG4gICAgICAgICAgICAgICAgYWNjLnB1c2goYXNzZXQpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL2ZpbmQgdGhlIGFzc2V0IHdpdGggdGhlIHNhbWUgcG9saWN5IGFuZCBhZGQgdGhlIHF1YW50aXR5IHRvIHRoZSBleGlzdGluZyBvbmVcclxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQXNzZXQgPSBhY2MuZmluZCgoYTogYW55KSA9PiBhLnVuaXQuc2xpY2UoMCwgNTYpID09PSBhc3NldC51bml0LnNsaWNlKDAsIDU2KSlcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nQXNzZXQucXVhbnRpdHkgPSAoQmlnSW50KGV4aXN0aW5nQXNzZXQucXVhbnRpdHkpICsgQmlnSW50KGFzc2V0LnF1YW50aXR5KSkudG9TdHJpbmcoKS5yZXBsYWNlKC9eMCsvLCAnJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgfSwgW10pXHJcbiAgICAgICAgY29uc3Qgc2xpY2VkQm9va3NXaXRoVW5pcXVlUG9saWN5ID0gb3B0aW9ucyAmJiBvcHRpb25zLnBhZ2UgP1xyXG4gICAgICAgICAgICBib29rc1dpdGhVbmlxdWVQb2xpY3kuc2xpY2UoKHBhZ2UgLSAxKSAqIChwYWdlTGVuZ3RoIHx8IDMwKSwgcGFnZSAqIChwYWdlTGVuZ3RoIHx8IDMwKSlcclxuICAgICAgICAgICAgOiBib29rc1dpdGhVbmlxdWVQb2xpY3lcclxuICAgICAgIC8vIHNsaWNlZERhdGEgPSBzbGljZWREYXRhXHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYXNzZXREZXRhaWxzUHJvbWlzZXMgPSBzbGljZWRCb29rc1dpdGhVbmlxdWVQb2xpY3lcclxuICAgICAgICAgICAgLm1hcCgoYXNzZXQ6IGFueSkgPT4gKCkgPT4gZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQkxPQ0tGUk9TVF9VUkx9L2Fzc2V0cy8ke2Fzc2V0LnVuaXR9YCwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RfaWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JMT0NLRlJPU1RfUFJPSkVDVF9JRCBhcyBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS50aGVuKHJlcyA9PiByZXMuanNvbigpKS5jYXRjaChlID0+IGNvbnNvbGUubG9nKFwiZXJyb3IgZmV0Y2hpbmcgYXNzZXRcIiwgZSkpKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXNzZXREZXRhaWxzID0gYXdhaXQgYmF0Y2hQcm9jZXNzKGFzc2V0RGV0YWlsc1Byb21pc2VzLCBiYXRjaFNpemUsIChwcm9taXNlOiBhbnkpID0+IHByb21pc2UoKSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXNzZXREZXRhaWxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzc2V0ID0gYXNzZXREZXRhaWxzW2ldO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBhc3NldCA9IGRhdGEuYW1vdW50W2ldO1xyXG4gICAgICAgICAgICBpZiAoYXNzZXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgcG9saWN5SWQsIG5hbWUsIGxhYmVsIH0gPSBmcm9tQXNzZXRVbml0KGFzc2V0LmFzc2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1ldGEgPSBhc3NldC5vbmNoYWluX21ldGFkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlID1cclxuICAgICAgICAgICAgICAgICAgICAobWV0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhLmltYWdlICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtUb1NyYyhjb252ZXJ0TWV0YWRhdGFQcm9wVG9TdHJpbmcobWV0YS5pbWFnZSkgfHwgJycpKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIChhc3NldC5tZXRhZGF0YSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldC5tZXRhZGF0YS5sb2dvICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtUb1NyYyhhc3NldC5tZXRhZGF0YS5sb2dvLCB0cnVlKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBib29rcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IEJpZ0ludChkYXRhLmFtb3VudC5maW5kKChhOiBhbnkpID0+IGEudW5pdCA9PT0gYXNzZXQuYXNzZXQpPy5xdWFudGl0eSB8fCAwKSxcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0Ftb3VudDogQmlnSW50KGFzc2V0LnF1YW50aXR5KSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiB0b2tlbk5hbWVGcm9tQXNzZXROYW1lKGFzc2V0LmFzc2V0X25hbWUgfHwgXCJcIikhLFxyXG4gICAgICAgICAgICAgICAgICAgIHRva2VuSWQ6IGFzc2V0LmFzc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB7IGltYWdlLCBuYW1lOiBtZXRhLmV4dHJhQXR0cmlidXRlcyA/IG1ldGE/LmV4dHJhQXR0cmlidXRlc1tcIkJvb2sgVGl0bGVcIl0gOiBhc3NldC5tZXRhZGF0YT8ubmFtZSB8fCBtZXRhPy5uYW1lLCBkZXNjcmlwdGlvbjogYXNzZXQubWV0YWRhdGE/LmRlc2NyaXB0aW9uIHx8IG1ldGE/LmRlc2NyaXB0aW9uLCBhdXRob3JzOiBhc3NldC5tZXRhZGF0YT8uYXV0aG9ycyB8fCBtZXRhPy5hdXRob3JzIHx8IFtdLCB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRlY2ltYWxzOiBhc3NldC5tZXRhZGF0YT8uZGVjaW1hbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sOiBhc3NldC5tZXRhZGF0YT8udGlja2VyID8gYXNzZXQubWV0YWRhdGE/LnRpY2tlciA6IG1ldGE/LnN5bWJvbCA/IG1ldGE/LnN5bWJvbCA6IHRva2VuTmFtZUZyb21Bc3NldE5hbWUoYXNzZXQuYXNzZXRfbmFtZSB8fCBcIlwiKSEsXHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBhZGRyZXNzSW5mby5ib29rcyA9IGJvb2tzXHJcbiAgICAgICAgY29uc3QgbG92ZWxhY2VBc3NldCA9IGRhdGEuYW1vdW50LmZpbmQoKGFzc2V0OiBhbnkpID0+IGFzc2V0LnVuaXQgPT09ICdsb3ZlbGFjZScpO1xyXG4gICAgICAgIGlmIChsb3ZlbGFjZUFzc2V0KSB7XHJcbiAgICAgICAgICAgIGFkZHJlc3NJbmZvLmJhbGFuY2UgPSBCaWdJbnQobG92ZWxhY2VBc3NldC5xdWFudGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyogY29uc3QgY291bnQgPSBkYXRhLmFtb3VudD8gZGF0YS5hbW91bnQubGVuZ3RoIDogMFxyXG4gICAgYWRkcmVzc0luZm8uY291bnQgPSBjb3VudCAqL1xyXG4gICAgY29uc29sZS5sb2coeyBhZGRyZXNzSW5mbyB9KTtcclxuICAgIHJldHVybiBhZGRyZXNzSW5mbztcclxufSJdLCJuYW1lcyI6WyJmcm9tTGFiZWwiLCJ0b2tlbk5hbWVGcm9tVW5pdCIsInVuaXQiLCJ0b2tlbk5hbWVGcm9tQXNzZXROYW1lIiwicmVwbGFjZSIsInNsaWNlIiwiYXNzZXROYW1lIiwibGFiZWwiLCJuYW1lIiwiaGV4TmFtZSIsIk51bWJlciIsImlzSW50ZWdlciIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsImdldENhcmRhbm9BZGRyZXNzSW5mbyIsImFkZHJlc3MiLCJyZXN1bHQiLCJmZXRjaCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19CTE9DS0ZST1NUX1VSTCIsImhlYWRlcnMiLCJwcm9qZWN0X2lkIiwiTkVYVF9QVUJMSUNfQkxPQ0tGUk9TVF9QUk9KRUNUX0lEIiwidGhlbiIsInJlcyIsImpzb24iLCJlcnJvciIsInN0YXR1c19jb2RlIiwiRXJyb3IiLCJhbW91bnQiLCJzdGFrZV9hZGRyZXNzIiwidHlwZSIsInNjcmlwdCIsImNvbnZlcnRNZXRhZGF0YVByb3BUb1N0cmluZyIsInNyYyIsIkFycmF5IiwiaXNBcnJheSIsImpvaW4iLCJsaW5rVG9TcmMiLCJsaW5rIiwiYmFzZTY0IiwiYmFzZTY0cmVnZXgiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJsZW5ndGgiLCJ0ZXN0IiwiZnJvbUFzc2V0VW5pdCIsInBvbGljeUlkIiwiYmF0Y2hQcm9jZXNzIiwiaXRlbXMiLCJiYXRjaFNpemUiLCJwcm9jZXNzRnVuY3Rpb24iLCJpIiwiYmF0Y2giLCJiYXRjaFJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiaXRlbSIsImNvbmNhdCIsImdldENhcmRhbm9Bc3NldHNCeUFkZHJlc3MiLCJvcHRpb25zIiwiYWxsTkZUcyIsImlnbm9yZURldGFpbHMiLCJwYWdlIiwicGFnZUxlbmd0aCIsImFkZHJlc3NJbmZvIiwiTkZUcyIsIkZUcyIsImRhdGEiLCJmdW5naWJsZSIsIk5GVCIsInNsaWNlZERhdGEiLCJhc3NldERldGFpbHNQcm9taXNlcyIsImZpbHRlciIsImFzc2V0IiwicG9saWNpZXMiLCJpbmNsdWRlcyIsImNhdGNoIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJhc3NldERldGFpbHMiLCJwcm9taXNlIiwiaGFzTkZUT25jaGFpbk1ldGFkYXRhIiwib25jaGFpbl9tZXRhZGF0YSIsInZlcnNpb24iLCJtZXRhIiwiaXNORlQiLCJxdWFudGl0eSIsImlzRnVuZ2libGUiLCJtaW50X29yX2J1cm5fY291bnQiLCJpbWFnZSIsIm1ldGFkYXRhIiwibG9nbyIsInB1c2giLCJCaWdJbnQiLCJmaW5kIiwiYSIsImV4aXN0aW5nQW1vdW50IiwiYXNzZXRfbmFtZSIsInRva2VuSWQiLCJleHRyYUF0dHJpYnV0ZXMiLCJkZXNjcmlwdGlvbiIsImF1dGhvcnMiLCJkZWNpbWFscyIsInN5bWJvbCIsInRpY2tlciIsImxvdmVsYWNlQXNzZXQiLCJiYWxhbmNlIiwiZ2V0Qm9va3NCeUFkZHJlc3MiLCJib29rcyIsImJvb2tzV2l0aFVuaXF1ZVBvbGljeSIsInJlZHVjZSIsImFjYyIsImV4aXN0aW5nQXNzZXQiLCJzbGljZWRCb29rc1dpdGhVbmlxdWVQb2xpY3kiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/cardano.ts\n");

/***/ }),

/***/ "./utils/plutus.ts":
/*!*************************!*\
  !*** ./utils/plutus.ts ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OracleMain: () => (/* binding */ OracleMain),\n/* harmony export */   TakeABookTakeABook: () => (/* binding */ TakeABookTakeABook)\n/* harmony export */ });\n/* harmony import */ var lucid_cardano__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lucid-cardano */ \"lucid-cardano\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lucid_cardano__WEBPACK_IMPORTED_MODULE_0__]);\nlucid_cardano__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// deno-lint-ignore-file\n\nconst OracleMain = Object.assign(function() {\n    return {\n        type: \"PlutusV2\",\n        script: \"59038f010000323232323232322323223225333007323232533300a3370e900118059baa0021323232533300d300b300e375400226466ebcdd31999111919980080099198008009bac3018301930193015375400844a66602e002297ae01323253330163375e601860306ea8c030c060dd50011806180c1baa00613301a00233004004001133004004001301b00230190014bd6f7b630111299980b80108008999801801980d001191998008008011bab301a301b301737546034006444a6660340042002264666008008603c0066644646600200200a44a66603e00226604066ec0dd48021ba60034bd6f7b630099191919299981019baf330120080024c103d8798000133024337606ea4020dd30038028a99981019b8f0080021325333021301f3022375400226604a66ec0dd4804981318119baa0010041004325333021533302400114a229405300103d87a80001301633025374c00297ae03233300100100800222253330260021001132333004004302a0033322323300100100522533302b00113302c337606ea4010dd4001a5eb7bdb1804c8c8c8c94ccc0b0cdd79980f004001260103d8798000133030337606ea4020dd40038028a99981619b8f008002132533302d302b302e375400226606266ec0dd4804981918179baa001004100432533302d302b00114c103d87a80001302233031375000297ae03370000e00226606066ec0dd48011ba800133006006003375a605a0066eb8c0ac008c0bc008c0b4004dd718128009bad30260013028002133024337606ea4008dd3000998030030019bab3021003375c603e004604600460420026eb8c064004dd5980d000980e00111299980819b9000200114c0103d8798000153330103371e0040022980103d87a800014c103d87b8000300430103754010602600260266028002601e6ea8c048c04cc03cdd5180918079baa0011632323300100100522533301200114c103d87a80001323253330113375e600e60266ea80080144c018cc0540092f5c0266008008002602c00460280026022601c6ea8010dd2a4000460200022c6eb0c038c02cdd518070011806980700098049baa00114984d958c94ccc018c010c01c00454ccc024c02000452616163754002a666006600260086ea80084c8c8c8c94ccc028c0340084c926323300100100422533300c00114984c8cc00c00cc040008dd718070008b1bad300b001300b00237586012002600a6ea800858dc3a4000ae6955ceaab9e5573eae815d0aba201\"\n    };\n}, {\n    datum: {\n        \"title\": \"OracleDatum\",\n        \"anyOf\": [\n            {\n                \"title\": \"OracleDatum\",\n                \"dataType\": \"constructor\",\n                \"index\": 0,\n                \"fields\": [\n                    {\n                        \"dataType\": \"list\",\n                        \"items\": {\n                            \"dataType\": \"bytes\"\n                        },\n                        \"title\": \"allowedPolicies\"\n                    },\n                    {\n                        \"dataType\": \"integer\",\n                        \"title\": \"updatedAt\"\n                    }\n                ]\n            }\n        ]\n    }\n}, {\n    _redeemer: {\n        \"title\": \"Unit\",\n        \"description\": \"The nullary constructor.\",\n        \"anyOf\": [\n            {\n                \"dataType\": \"constructor\",\n                \"index\": 0,\n                \"fields\": []\n            }\n        ]\n    }\n});\nconst TakeABookTakeABook = Object.assign(function(oraclePolicy) {\n    return {\n        type: \"PlutusV2\",\n        script: (0,lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.applyParamsToScript)(\"5905e40100003232323232323223223232322322533300a3232323232533300f300a301037540082646464646464646464a666030602860326ea80044c8c8cdc4998009bab301f30200020043300133332222323330010013300f3758601c60426ea80108c94ccc084cdd7980818119baa0023374a90021981280225eb80400452819baf300e30223754601c60446ea8004c038c088dd500225eb7bdb1808894ccc09000840044ccc00c00cc09c008c8ccc004004008dd5980798121baa302700322253330270021001132333004004302b0033322323300100100522533302c00113302d337606ea4010dd3001a5eb7bdb1804c8c8c8c94ccc0b4cdd79980980400126103d8798000133031337606ea4020dd30038028a99981699b8f008002132533302e302a302f375400226606466ec0dd4804981998181baa001004100432533302e533303100114a229405300103d87a80001301933032374c00297ae03233300100100800222253330330021001132333004004303700333223233001001005225333038001133039337606ea4010dd4001a5eb7bdb1804c8c8c8c94ccc0e4cdd79980f804001260103d879800013303d337606ea4020dd40038028a99981c99b8f008002132533303a3036303b375400226607c66ec0dd4804981f981e1baa001004100432533303a303600114c103d87a8000130253303e375000297ae03370000e00226607a66ec0dd48011ba800133006006003375a60740066eb8c0e0008c0f0008c0e8004dd718190009bad30330013035002133031337606ea4008dd3000998030030019bab302e003375c60580046060004605c0026eb8c098004dd59813800981480111299980e19b9000200114c0103d87980001533301c3371e0040022980103d87a800014c103d87b80003008301c3754022603e004600a6603c600a6603c01697ae04bd700021119198008008019129998100008a4000264666444646600200200644a66604c0022006264666444a66604e6602601a012266e000040084004dd718128009bad302600133003003302a0023028001375c603e0026eacc080004cc00c00cc090008c088004c068dd5180e980f180d1baa301d301a37540022c646600200201644a666038002298103d87a800013232533301b3375e6012603a6ea80080304c018cc07c0092f5c02660080080026040004603c00264646464a666034602c60366ea80044c8c94ccc070c0600045854ccc070c05c004584c8c8dd6180618101baa002533301d3019301e3754002264646464a666048604e0042649319198008008021129998130008a4c2646600600660540046eb8c0a000458dd6981280098128011bac3023001301f37540022c6042603c6ea8008c070dd50009804980e1baa3007301c3754603e60386ea800458ccc004004cc02402c8cc018c00cdd59803980e1baa3007301c37540020309000111299980f0010a6103d87a800013232533301d301900313008330210024bd70099980280280099b8000348004c08800cc080008c004004894ccc06c00452f5c02660386032603a00266004004603c0026e95200022323300100100322533301b00114a0264a66603266e3cdd7180f0010020a51133003003001301e00123019301a00123018001230173018301800122323300100100322533301700114bd7009919299980b180280109980d00119802002000899802002000980d801180c800980a18089baa004163758602660280046eb0c048004c038dd518088011808180880098061baa00114984d958c94ccc024c014c02800454ccc030c02c00452616163754002a66600c6004600e6ea800c4c8c94ccc02cc0380084c926325333009300500113232533300e30110021324994ccc02cc01cc030dd50008991919192999809180a80109924ca66601e601660206ea800c4c8c94ccc050c05c00852616375c602a00260226ea800c5858dd698098009809801180880098069baa0011616300f001300b37540042a66601260080022a66601860166ea80085261616300937540022c601800260106ea800c58dc3a40046e1d2000375c002ae6955ceaab9e5573eae815d0aba21\", [\n            oraclePolicy\n        ], {\n            \"dataType\": \"list\",\n            \"items\": [\n                {\n                    \"dataType\": \"bytes\"\n                }\n            ]\n        })\n    };\n}, {\n    _datum: {\n        \"title\": \"Datum\",\n        \"anyOf\": [\n            {\n                \"title\": \"Datum\",\n                \"dataType\": \"constructor\",\n                \"index\": 0,\n                \"fields\": [\n                    {\n                        \"title\": \"prevInput\",\n                        \"anyOf\": [\n                            {\n                                \"title\": \"Some\",\n                                \"description\": \"An optional value.\",\n                                \"dataType\": \"constructor\",\n                                \"index\": 0,\n                                \"fields\": [\n                                    {\n                                        \"description\": \"An `OutputReference` is a unique reference to an output on-chain. The `output_index`\\n corresponds to the position in the output list of the transaction (identified by its id)\\n that produced that output\",\n                                        \"anyOf\": [\n                                            {\n                                                \"title\": \"OutputReference\",\n                                                \"dataType\": \"constructor\",\n                                                \"index\": 0,\n                                                \"fields\": [\n                                                    {\n                                                        \"title\": \"transactionId\",\n                                                        \"description\": \"A unique transaction identifier, as the hash of a transaction body. Note that the transaction id\\n isn't a direct hash of the `Transaction` as visible on-chain. Rather, they correspond to hash\\n digests of transaction body as they are serialized on the network.\",\n                                                        \"anyOf\": [\n                                                            {\n                                                                \"title\": \"TransactionId\",\n                                                                \"dataType\": \"constructor\",\n                                                                \"index\": 0,\n                                                                \"fields\": [\n                                                                    {\n                                                                        \"dataType\": \"bytes\",\n                                                                        \"title\": \"hash\"\n                                                                    }\n                                                                ]\n                                                            }\n                                                        ]\n                                                    },\n                                                    {\n                                                        \"dataType\": \"integer\",\n                                                        \"title\": \"outputIndex\"\n                                                    }\n                                                ]\n                                            }\n                                        ]\n                                    }\n                                ]\n                            },\n                            {\n                                \"title\": \"None\",\n                                \"description\": \"Nothing.\",\n                                \"dataType\": \"constructor\",\n                                \"index\": 1,\n                                \"fields\": []\n                            }\n                        ]\n                    }\n                ]\n            }\n        ]\n    }\n}, {\n    _redeemer: {\n        \"title\": \"Unit\",\n        \"description\": \"The nullary constructor.\",\n        \"anyOf\": [\n            {\n                \"dataType\": \"constructor\",\n                \"index\": 0,\n                \"fields\": []\n            }\n        ]\n    }\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9wbHV0dXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsd0JBQXdCO0FBS0Q7QUFRaEIsTUFBTUMsYUFBYUMsT0FBT0MsTUFBTSxDQUNyQztJQUNFLE9BQU87UUFDTEMsTUFBTTtRQUNOQyxRQUNFO0lBQ0o7QUFDRixHQUNBO0lBQ0VDLE9BQU87UUFDTCxTQUFTO1FBQ1QsU0FBUztZQUFDO2dCQUNSLFNBQVM7Z0JBQ1QsWUFBWTtnQkFDWixTQUFTO2dCQUNULFVBQVU7b0JBQUM7d0JBQ1QsWUFBWTt3QkFDWixTQUFTOzRCQUFFLFlBQVk7d0JBQVE7d0JBQy9CLFNBQVM7b0JBQ1g7b0JBQUc7d0JBQUUsWUFBWTt3QkFBVyxTQUFTO29CQUFZO2lCQUFFO1lBQ3JEO1NBQUU7SUFDSjtBQUNGLEdBQ0E7SUFDRUMsV0FBVztRQUNULFNBQVM7UUFDVCxlQUFlO1FBQ2YsU0FBUztZQUFDO2dCQUFFLFlBQVk7Z0JBQWUsU0FBUztnQkFBRyxVQUFVLEVBQUU7WUFBQztTQUFFO0lBQ3BFO0FBQ0YsR0FDeUI7QUFVcEIsTUFBTUMscUJBQXFCTixPQUFPQyxNQUFNLENBQzdDLFNBQVVNLFlBQW9CO0lBQzVCLE9BQU87UUFDTEwsTUFBTTtRQUNOQyxRQUFRTCxrRUFBbUJBLENBQ3pCLGs5RkFDQTtZQUFDUztTQUFhLEVBQ2Q7WUFBRSxZQUFZO1lBQVEsU0FBUztnQkFBQztvQkFBRSxZQUFZO2dCQUFRO2FBQUU7UUFBQztJQUU3RDtBQUNGLEdBQ0E7SUFDRUMsUUFBUTtRQUNOLFNBQVM7UUFDVCxTQUFTO1lBQUM7Z0JBQ1IsU0FBUztnQkFDVCxZQUFZO2dCQUNaLFNBQVM7Z0JBQ1QsVUFBVTtvQkFBQzt3QkFDVCxTQUFTO3dCQUNULFNBQVM7NEJBQUM7Z0NBQ1IsU0FBUztnQ0FDVCxlQUFlO2dDQUNmLFlBQVk7Z0NBQ1osU0FBUztnQ0FDVCxVQUFVO29DQUFDO3dDQUNULGVBQ0U7d0NBQ0YsU0FBUzs0Q0FBQztnREFDUixTQUFTO2dEQUNULFlBQVk7Z0RBQ1osU0FBUztnREFDVCxVQUFVO29EQUFDO3dEQUNULFNBQVM7d0RBQ1QsZUFDRTt3REFDRixTQUFTOzREQUFDO2dFQUNSLFNBQVM7Z0VBQ1QsWUFBWTtnRUFDWixTQUFTO2dFQUNULFVBQVU7b0VBQUM7d0VBQUUsWUFBWTt3RUFBUyxTQUFTO29FQUFPO2lFQUFFOzREQUN0RDt5REFBRTtvREFDSjtvREFBRzt3REFBRSxZQUFZO3dEQUFXLFNBQVM7b0RBQWM7aURBQUU7NENBQ3ZEO3lDQUFFO29DQUNKO2lDQUFFOzRCQUNKOzRCQUFHO2dDQUNELFNBQVM7Z0NBQ1QsZUFBZTtnQ0FDZixZQUFZO2dDQUNaLFNBQVM7Z0NBQ1QsVUFBVSxFQUFFOzRCQUNkO3lCQUFFO29CQUNKO2lCQUFFO1lBQ0o7U0FBRTtJQUNKO0FBQ0YsR0FDQTtJQUNFSCxXQUFXO1FBQ1QsU0FBUztRQUNULGVBQWU7UUFDZixTQUFTO1lBQUM7Z0JBQUUsWUFBWTtnQkFBZSxTQUFTO2dCQUFHLFVBQVUsRUFBRTtZQUFDO1NBQUU7SUFDcEU7QUFDRixHQUNpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FyY2FudW0vLi91dGlscy9wbHV0dXMudHM/YjQ4NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBkZW5vLWxpbnQtaWdub3JlLWZpbGVcbmltcG9ydCB7XG4gIGFwcGx5UGFyYW1zVG9TY3JpcHQsXG4gIERhdGEsXG4gIFZhbGlkYXRvcixcbn0gZnJvbSBcImx1Y2lkLWNhcmRhbm9cIjtcblxuZXhwb3J0IGludGVyZmFjZSBPcmFjbGVNYWluIHtcbiAgbmV3ICgpOiBWYWxpZGF0b3I7XG4gIGRhdHVtOiB7IGFsbG93ZWRQb2xpY2llczogQXJyYXk8c3RyaW5nPjsgdXBkYXRlZEF0OiBiaWdpbnQgfTtcbiAgX3JlZGVlbWVyOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBPcmFjbGVNYWluID0gT2JqZWN0LmFzc2lnbihcbiAgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiBcIlBsdXR1c1YyXCIsXG4gICAgICBzY3JpcHQ6XG4gICAgICAgIFwiNTkwMzhmMDEwMDAwMzIzMjMyMzIzMjMyMzIyMzIzMjIzMjI1MzMzMDA3MzIzMjMyNTMzMzAwYTMzNzBlOTAwMTE4MDU5YmFhMDAyMTMyMzIzMjUzMzMwMGQzMDBiMzAwZTM3NTQwMDIyNjQ2NmViY2RkMzE5OTkxMTE5MTk5ODAwODAwOTkxOTgwMDgwMDliYWMzMDE4MzAxOTMwMTkzMDE1Mzc1NDAwODQ0YTY2NjAyZTAwMjI5N2FlMDEzMjMyNTMzMzAxNjMzNzVlNjAxODYwMzA2ZWE4YzAzMGMwNjBkZDUwMDExODA2MTgwYzFiYWEwMDYxMzMwMWEwMDIzMzAwNDAwNDAwMTEzMzAwNDAwNDAwMTMwMWIwMDIzMDE5MDAxNGJkNmY3YjYzMDExMTI5OTk4MGI4MDEwODAwODk5OTgwMTgwMTk4MGQwMDExOTE5OTgwMDgwMDgwMTFiYWIzMDFhMzAxYjMwMTczNzU0NjAzNDAwNjQ0NGE2NjYwMzQwMDQyMDAyMjY0NjY2MDA4MDA4NjAzYzAwNjY2NDQ2NDY2MDAyMDAyMDBhNDRhNjY2MDNlMDAyMjY2MDQwNjZlYzBkZDQ4MDIxYmE2MDAzNGJkNmY3YjYzMDA5OTE5MTkxOTI5OTk4MTAxOWJhZjMzMDEyMDA4MDAyNGMxMDNkODc5ODAwMDEzMzAyNDMzNzYwNmVhNDAyMGRkMzAwMzgwMjhhOTk5ODEwMTliOGYwMDgwMDIxMzI1MzMzMDIxMzAxZjMwMjIzNzU0MDAyMjY2MDRhNjZlYzBkZDQ4MDQ5ODEzMTgxMTliYWEwMDEwMDQxMDA0MzI1MzMzMDIxNTMzMzAyNDAwMTE0YTIyOTQwNTMwMDEwM2Q4N2E4MDAwMTMwMTYzMzAyNTM3NGMwMDI5N2FlMDMyMzMzMDAxMDAxMDA4MDAyMjIyNTMzMzAyNjAwMjEwMDExMzIzMzMwMDQwMDQzMDJhMDAzMzMyMjMyMzMwMDEwMDEwMDUyMjUzMzMwMmIwMDExMzMwMmMzMzc2MDZlYTQwMTBkZDQwMDFhNWViN2JkYjE4MDRjOGM4YzhjOTRjY2MwYjBjZGQ3OTk4MGYwMDQwMDEyNjAxMDNkODc5ODAwMDEzMzAzMDMzNzYwNmVhNDAyMGRkNDAwMzgwMjhhOTk5ODE2MTliOGYwMDgwMDIxMzI1MzMzMDJkMzAyYjMwMmUzNzU0MDAyMjY2MDYyNjZlYzBkZDQ4MDQ5ODE5MTgxNzliYWEwMDEwMDQxMDA0MzI1MzMzMDJkMzAyYjAwMTE0YzEwM2Q4N2E4MDAwMTMwMjIzMzAzMTM3NTAwMDI5N2FlMDMzNzAwMDBlMDAyMjY2MDYwNjZlYzBkZDQ4MDExYmE4MDAxMzMwMDYwMDYwMDMzNzVhNjA1YTAwNjZlYjhjMGFjMDA4YzBiYzAwOGMwYjQwMDRkZDcxODEyODAwOWJhZDMwMjYwMDEzMDI4MDAyMTMzMDI0MzM3NjA2ZWE0MDA4ZGQzMDAwOTk4MDMwMDMwMDE5YmFiMzAyMTAwMzM3NWM2MDNlMDA0NjA0NjAwNDYwNDIwMDI2ZWI4YzA2NDAwNGRkNTk4MGQwMDA5ODBlMDAxMTEyOTk5ODA4MTliOTAwMDIwMDExNGMwMTAzZDg3OTgwMDAxNTMzMzAxMDMzNzFlMDA0MDAyMjk4MDEwM2Q4N2E4MDAwMTRjMTAzZDg3YjgwMDAzMDA0MzAxMDM3NTQwMTA2MDI2MDAyNjAyNjYwMjgwMDI2MDFlNmVhOGMwNDhjMDRjYzAzY2RkNTE4MDkxODA3OWJhYTAwMTE2MzIzMjMzMDAxMDAxMDA1MjI1MzMzMDEyMDAxMTRjMTAzZDg3YTgwMDAxMzIzMjUzMzMwMTEzMzc1ZTYwMGU2MDI2NmVhODAwODAxNDRjMDE4Y2MwNTQwMDkyZjVjMDI2NjAwODAwODAwMjYwMmMwMDQ2MDI4MDAyNjAyMjYwMWM2ZWE4MDEwZGQyYTQwMDA0NjAyMDAwMjJjNmViMGMwMzhjMDJjZGQ1MTgwNzAwMTE4MDY5ODA3MDAwOTgwNDliYWEwMDExNDk4NGQ5NThjOTRjY2MwMThjMDEwYzAxYzAwNDU0Y2NjMDI0YzAyMDAwNDUyNjE2MTYzNzU0MDAyYTY2NjAwNjYwMDI2MDA4NmVhODAwODRjOGM4YzhjOTRjY2MwMjhjMDM0MDA4NGM5MjYzMjMzMDAxMDAxMDA0MjI1MzMzMDBjMDAxMTQ5ODRjOGNjMDBjMDBjYzA0MDAwOGRkNzE4MDcwMDA4YjFiYWQzMDBiMDAxMzAwYjAwMjM3NTg2MDEyMDAyNjAwYTZlYTgwMDg1OGRjM2E0MDAwYWU2OTU1Y2VhYWI5ZTU1NzNlYWU4MTVkMGFiYTIwMVwiLFxuICAgIH07XG4gIH0sXG4gIHtcbiAgICBkYXR1bToge1xuICAgICAgXCJ0aXRsZVwiOiBcIk9yYWNsZURhdHVtXCIsXG4gICAgICBcImFueU9mXCI6IFt7XG4gICAgICAgIFwidGl0bGVcIjogXCJPcmFjbGVEYXR1bVwiLFxuICAgICAgICBcImRhdGFUeXBlXCI6IFwiY29uc3RydWN0b3JcIixcbiAgICAgICAgXCJpbmRleFwiOiAwLFxuICAgICAgICBcImZpZWxkc1wiOiBbe1xuICAgICAgICAgIFwiZGF0YVR5cGVcIjogXCJsaXN0XCIsXG4gICAgICAgICAgXCJpdGVtc1wiOiB7IFwiZGF0YVR5cGVcIjogXCJieXRlc1wiIH0sXG4gICAgICAgICAgXCJ0aXRsZVwiOiBcImFsbG93ZWRQb2xpY2llc1wiLFxuICAgICAgICB9LCB7IFwiZGF0YVR5cGVcIjogXCJpbnRlZ2VyXCIsIFwidGl0bGVcIjogXCJ1cGRhdGVkQXRcIiB9XSxcbiAgICAgIH1dLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBfcmVkZWVtZXI6IHtcbiAgICAgIFwidGl0bGVcIjogXCJVbml0XCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIG51bGxhcnkgY29uc3RydWN0b3IuXCIsXG4gICAgICBcImFueU9mXCI6IFt7IFwiZGF0YVR5cGVcIjogXCJjb25zdHJ1Y3RvclwiLCBcImluZGV4XCI6IDAsIFwiZmllbGRzXCI6IFtdIH1dLFxuICAgIH0sXG4gIH0sXG4pIGFzIHVua25vd24gYXMgT3JhY2xlTWFpbjtcblxuZXhwb3J0IGludGVyZmFjZSBUYWtlQUJvb2tUYWtlQUJvb2sge1xuICBuZXcgKG9yYWNsZVBvbGljeTogc3RyaW5nKTogVmFsaWRhdG9yO1xuICBfZGF0dW06IHtcbiAgICBwcmV2SW5wdXQ6IHsgdHJhbnNhY3Rpb25JZDogeyBoYXNoOiBzdHJpbmcgfTsgb3V0cHV0SW5kZXg6IGJpZ2ludCB9IHwgbnVsbDtcbiAgfTtcbiAgX3JlZGVlbWVyOiB1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBUYWtlQUJvb2tUYWtlQUJvb2sgPSBPYmplY3QuYXNzaWduKFxuICBmdW5jdGlvbiAob3JhY2xlUG9saWN5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogXCJQbHV0dXNWMlwiLFxuICAgICAgc2NyaXB0OiBhcHBseVBhcmFtc1RvU2NyaXB0KFxuICAgICAgICBcIjU5MDVlNDAxMDAwMDMyMzIzMjMyMzIzMjMyMjMyMjMyMzIzMjIzMjI1MzMzMDBhMzIzMjMyMzIzMjUzMzMwMGYzMDBhMzAxMDM3NTQwMDgyNjQ2NDY0NjQ2NDY0NjQ2NDY0YTY2NjAzMDYwMjg2MDMyNmVhODAwNDRjOGM4Y2RjNDk5ODAwOWJhYjMwMWYzMDIwMDAyMDA0MzMwMDEzMzMzMjIyMjMyMzMzMDAxMDAxMzMwMGYzNzU4NjAxYzYwNDI2ZWE4MDEwOGM5NGNjYzA4NGNkZDc5ODA4MTgxMTliYWEwMDIzMzc0YTkwMDIxOTgxMjgwMjI1ZWI4MDQwMDQ1MjgxOWJhZjMwMGUzMDIyMzc1NDYwMWM2MDQ0NmVhODAwNGMwMzhjMDg4ZGQ1MDAyMjVlYjdiZGIxODA4ODk0Y2NjMDkwMDA4NDAwNDRjY2MwMGMwMGNjMDljMDA4YzhjY2MwMDQwMDQwMDhkZDU5ODA3OTgxMjFiYWEzMDI3MDAzMjIyNTMzMzAyNzAwMjEwMDExMzIzMzMwMDQwMDQzMDJiMDAzMzMyMjMyMzMwMDEwMDEwMDUyMjUzMzMwMmMwMDExMzMwMmQzMzc2MDZlYTQwMTBkZDMwMDFhNWViN2JkYjE4MDRjOGM4YzhjOTRjY2MwYjRjZGQ3OTk4MDk4MDQwMDEyNjEwM2Q4Nzk4MDAwMTMzMDMxMzM3NjA2ZWE0MDIwZGQzMDAzODAyOGE5OTk4MTY5OWI4ZjAwODAwMjEzMjUzMzMwMmUzMDJhMzAyZjM3NTQwMDIyNjYwNjQ2NmVjMGRkNDgwNDk4MTk5ODE4MWJhYTAwMTAwNDEwMDQzMjUzMzMwMmU1MzMzMDMxMDAxMTRhMjI5NDA1MzAwMTAzZDg3YTgwMDAxMzAxOTMzMDMyMzc0YzAwMjk3YWUwMzIzMzMwMDEwMDEwMDgwMDIyMjI1MzMzMDMzMDAyMTAwMTEzMjMzMzAwNDAwNDMwMzcwMDMzMzIyMzIzMzAwMTAwMTAwNTIyNTMzMzAzODAwMTEzMzAzOTMzNzYwNmVhNDAxMGRkNDAwMWE1ZWI3YmRiMTgwNGM4YzhjOGM5NGNjYzBlNGNkZDc5OTgwZjgwNDAwMTI2MDEwM2Q4Nzk4MDAwMTMzMDNkMzM3NjA2ZWE0MDIwZGQ0MDAzODAyOGE5OTk4MWM5OWI4ZjAwODAwMjEzMjUzMzMwM2EzMDM2MzAzYjM3NTQwMDIyNjYwN2M2NmVjMGRkNDgwNDk4MWY5ODFlMWJhYTAwMTAwNDEwMDQzMjUzMzMwM2EzMDM2MDAxMTRjMTAzZDg3YTgwMDAxMzAyNTMzMDNlMzc1MDAwMjk3YWUwMzM3MDAwMGUwMDIyNjYwN2E2NmVjMGRkNDgwMTFiYTgwMDEzMzAwNjAwNjAwMzM3NWE2MDc0MDA2NmViOGMwZTAwMDhjMGYwMDA4YzBlODAwNGRkNzE4MTkwMDA5YmFkMzAzMzAwMTMwMzUwMDIxMzMwMzEzMzc2MDZlYTQwMDhkZDMwMDA5OTgwMzAwMzAwMTliYWIzMDJlMDAzMzc1YzYwNTgwMDQ2MDYwMDA0NjA1YzAwMjZlYjhjMDk4MDA0ZGQ1OTgxMzgwMDk4MTQ4MDExMTI5OTk4MGUxOWI5MDAwMjAwMTE0YzAxMDNkODc5ODAwMDE1MzMzMDFjMzM3MWUwMDQwMDIyOTgwMTAzZDg3YTgwMDAxNGMxMDNkODdiODAwMDMwMDgzMDFjMzc1NDAyMjYwM2UwMDQ2MDBhNjYwM2M2MDBhNjYwM2MwMTY5N2FlMDRiZDcwMDAyMTExOTE5ODAwODAwODAxOTEyOTk5ODEwMDAwOGE0MDAwMjY0NjY2NDQ0NjQ2NjAwMjAwMjAwNjQ0YTY2NjA0YzAwMjIwMDYyNjQ2NjY0NDRhNjY2MDRlNjYwMjYwMWEwMTIyNjZlMDAwMDQwMDg0MDA0ZGQ3MTgxMjgwMDliYWQzMDI2MDAxMzMwMDMwMDMzMDJhMDAyMzAyODAwMTM3NWM2MDNlMDAyNmVhY2MwODAwMDRjYzAwYzAwY2MwOTAwMDhjMDg4MDA0YzA2OGRkNTE4MGU5ODBmMTgwZDFiYWEzMDFkMzAxYTM3NTQwMDIyYzY0NjYwMDIwMDIwMTY0NGE2NjYwMzgwMDIyOTgxMDNkODdhODAwMDEzMjMyNTMzMzAxYjMzNzVlNjAxMjYwM2E2ZWE4MDA4MDMwNGMwMThjYzA3YzAwOTJmNWMwMjY2MDA4MDA4MDAyNjA0MDAwNDYwM2MwMDI2NDY0NjQ2NGE2NjYwMzQ2MDJjNjAzNjZlYTgwMDQ0YzhjOTRjY2MwNzBjMDYwMDA0NTg1NGNjYzA3MGMwNWMwMDQ1ODRjOGM4ZGQ2MTgwNjE4MTAxYmFhMDAyNTMzMzAxZDMwMTkzMDFlMzc1NDAwMjI2NDY0NjQ2NGE2NjYwNDg2MDRlMDA0MjY0OTMxOTE5ODAwODAwODAyMTEyOTk5ODEzMDAwOGE0YzI2NDY2MDA2MDA2NjA1NDAwNDZlYjhjMGEwMDA0NThkZDY5ODEyODAwOTgxMjgwMTFiYWMzMDIzMDAxMzAxZjM3NTQwMDIyYzYwNDI2MDNjNmVhODAwOGMwNzBkZDUwMDA5ODA0OTgwZTFiYWEzMDA3MzAxYzM3NTQ2MDNlNjAzODZlYTgwMDQ1OGNjYzAwNDAwNGNjMDI0MDJjOGNjMDE4YzAwY2RkNTk4MDM5ODBlMWJhYTMwMDczMDFjMzc1NDAwMjAzMDkwMDAxMTEyOTk5ODBmMDAxMGE2MTAzZDg3YTgwMDAxMzIzMjUzMzMwMWQzMDE5MDAzMTMwMDgzMzAyMTAwMjRiZDcwMDk5OTgwMjgwMjgwMDk5YjgwMDAzNDgwMDRjMDg4MDBjYzA4MDAwOGMwMDQwMDQ4OTRjY2MwNmMwMDQ1MmY1YzAyNjYwMzg2MDMyNjAzYTAwMjY2MDA0MDA0NjAzYzAwMjZlOTUyMDAwMjIzMjMzMDAxMDAxMDAzMjI1MzMzMDFiMDAxMTRhMDI2NGE2NjYwMzI2NmUzY2RkNzE4MGYwMDEwMDIwYTUxMTMzMDAzMDAzMDAxMzAxZTAwMTIzMDE5MzAxYTAwMTIzMDE4MDAxMjMwMTczMDE4MzAxODAwMTIyMzIzMzAwMTAwMTAwMzIyNTMzMzAxNzAwMTE0YmQ3MDA5OTE5Mjk5OTgwYjE4MDI4MDEwOTk4MGQwMDExOTgwMjAwMjAwMDg5OTgwMjAwMjAwMDk4MGQ4MDExODBjODAwOTgwYTE4MDg5YmFhMDA0MTYzNzU4NjAyNjYwMjgwMDQ2ZWIwYzA0ODAwNGMwMzhkZDUxODA4ODAxMTgwODE4MDg4MDA5ODA2MWJhYTAwMTE0OTg0ZDk1OGM5NGNjYzAyNGMwMTRjMDI4MDA0NTRjY2MwMzBjMDJjMDA0NTI2MTYxNjM3NTQwMDJhNjY2MDBjNjAwNDYwMGU2ZWE4MDBjNGM4Yzk0Y2NjMDJjYzAzODAwODRjOTI2MzI1MzMzMDA5MzAwNTAwMTEzMjMyNTMzMzAwZTMwMTEwMDIxMzI0OTk0Y2NjMDJjYzAxY2MwMzBkZDUwMDA4OTkxOTE5MTkyOTk5ODA5MTgwYTgwMTA5OTI0Y2E2NjYwMWU2MDE2NjAyMDZlYTgwMGM0YzhjOTRjY2MwNTBjMDVjMDA4NTI2MTYzNzVjNjAyYTAwMjYwMjI2ZWE4MDBjNTg1OGRkNjk4MDk4MDA5ODA5ODAxMTgwODgwMDk4MDY5YmFhMDAxMTYxNjMwMGYwMDEzMDBiMzc1NDAwNDJhNjY2MDEyNjAwODAwMjJhNjY2MDE4NjAxNjZlYTgwMDg1MjYxNjE2MzAwOTM3NTQwMDIyYzYwMTgwMDI2MDEwNmVhODAwYzU4ZGMzYTQwMDQ2ZTFkMjAwMDM3NWMwMDJhZTY5NTVjZWFhYjllNTU3M2VhZTgxNWQwYWJhMjFcIixcbiAgICAgICAgW29yYWNsZVBvbGljeV0sXG4gICAgICAgIHsgXCJkYXRhVHlwZVwiOiBcImxpc3RcIiwgXCJpdGVtc1wiOiBbeyBcImRhdGFUeXBlXCI6IFwiYnl0ZXNcIiB9XSB9IGFzIGFueSxcbiAgICAgICksXG4gICAgfTtcbiAgfSxcbiAge1xuICAgIF9kYXR1bToge1xuICAgICAgXCJ0aXRsZVwiOiBcIkRhdHVtXCIsXG4gICAgICBcImFueU9mXCI6IFt7XG4gICAgICAgIFwidGl0bGVcIjogXCJEYXR1bVwiLFxuICAgICAgICBcImRhdGFUeXBlXCI6IFwiY29uc3RydWN0b3JcIixcbiAgICAgICAgXCJpbmRleFwiOiAwLFxuICAgICAgICBcImZpZWxkc1wiOiBbe1xuICAgICAgICAgIFwidGl0bGVcIjogXCJwcmV2SW5wdXRcIixcbiAgICAgICAgICBcImFueU9mXCI6IFt7XG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiU29tZVwiLFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkFuIG9wdGlvbmFsIHZhbHVlLlwiLFxuICAgICAgICAgICAgXCJkYXRhVHlwZVwiOiBcImNvbnN0cnVjdG9yXCIsXG4gICAgICAgICAgICBcImluZGV4XCI6IDAsXG4gICAgICAgICAgICBcImZpZWxkc1wiOiBbe1xuICAgICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6XG4gICAgICAgICAgICAgICAgXCJBbiBgT3V0cHV0UmVmZXJlbmNlYCBpcyBhIHVuaXF1ZSByZWZlcmVuY2UgdG8gYW4gb3V0cHV0IG9uLWNoYWluLiBUaGUgYG91dHB1dF9pbmRleGBcXG4gY29ycmVzcG9uZHMgdG8gdGhlIHBvc2l0aW9uIGluIHRoZSBvdXRwdXQgbGlzdCBvZiB0aGUgdHJhbnNhY3Rpb24gKGlkZW50aWZpZWQgYnkgaXRzIGlkKVxcbiB0aGF0IHByb2R1Y2VkIHRoYXQgb3V0cHV0XCIsXG4gICAgICAgICAgICAgIFwiYW55T2ZcIjogW3tcbiAgICAgICAgICAgICAgICBcInRpdGxlXCI6IFwiT3V0cHV0UmVmZXJlbmNlXCIsXG4gICAgICAgICAgICAgICAgXCJkYXRhVHlwZVwiOiBcImNvbnN0cnVjdG9yXCIsXG4gICAgICAgICAgICAgICAgXCJpbmRleFwiOiAwLFxuICAgICAgICAgICAgICAgIFwiZmllbGRzXCI6IFt7XG4gICAgICAgICAgICAgICAgICBcInRpdGxlXCI6IFwidHJhbnNhY3Rpb25JZFwiLFxuICAgICAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOlxuICAgICAgICAgICAgICAgICAgICBcIkEgdW5pcXVlIHRyYW5zYWN0aW9uIGlkZW50aWZpZXIsIGFzIHRoZSBoYXNoIG9mIGEgdHJhbnNhY3Rpb24gYm9keS4gTm90ZSB0aGF0IHRoZSB0cmFuc2FjdGlvbiBpZFxcbiBpc24ndCBhIGRpcmVjdCBoYXNoIG9mIHRoZSBgVHJhbnNhY3Rpb25gIGFzIHZpc2libGUgb24tY2hhaW4uIFJhdGhlciwgdGhleSBjb3JyZXNwb25kIHRvIGhhc2hcXG4gZGlnZXN0cyBvZiB0cmFuc2FjdGlvbiBib2R5IGFzIHRoZXkgYXJlIHNlcmlhbGl6ZWQgb24gdGhlIG5ldHdvcmsuXCIsXG4gICAgICAgICAgICAgICAgICBcImFueU9mXCI6IFt7XG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogXCJUcmFuc2FjdGlvbklkXCIsXG4gICAgICAgICAgICAgICAgICAgIFwiZGF0YVR5cGVcIjogXCJjb25zdHJ1Y3RvclwiLFxuICAgICAgICAgICAgICAgICAgICBcImluZGV4XCI6IDAsXG4gICAgICAgICAgICAgICAgICAgIFwiZmllbGRzXCI6IFt7IFwiZGF0YVR5cGVcIjogXCJieXRlc1wiLCBcInRpdGxlXCI6IFwiaGFzaFwiIH1dLFxuICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgfSwgeyBcImRhdGFUeXBlXCI6IFwiaW50ZWdlclwiLCBcInRpdGxlXCI6IFwib3V0cHV0SW5kZXhcIiB9XSxcbiAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBcInRpdGxlXCI6IFwiTm9uZVwiLFxuICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIk5vdGhpbmcuXCIsXG4gICAgICAgICAgICBcImRhdGFUeXBlXCI6IFwiY29uc3RydWN0b3JcIixcbiAgICAgICAgICAgIFwiaW5kZXhcIjogMSxcbiAgICAgICAgICAgIFwiZmllbGRzXCI6IFtdLFxuICAgICAgICAgIH1dLFxuICAgICAgICB9XSxcbiAgICAgIH1dLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICBfcmVkZWVtZXI6IHtcbiAgICAgIFwidGl0bGVcIjogXCJVbml0XCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIG51bGxhcnkgY29uc3RydWN0b3IuXCIsXG4gICAgICBcImFueU9mXCI6IFt7IFwiZGF0YVR5cGVcIjogXCJjb25zdHJ1Y3RvclwiLCBcImluZGV4XCI6IDAsIFwiZmllbGRzXCI6IFtdIH1dLFxuICAgIH0sXG4gIH0sXG4pIGFzIHVua25vd24gYXMgVGFrZUFCb29rVGFrZUFCb29rO1xuIl0sIm5hbWVzIjpbImFwcGx5UGFyYW1zVG9TY3JpcHQiLCJPcmFjbGVNYWluIiwiT2JqZWN0IiwiYXNzaWduIiwidHlwZSIsInNjcmlwdCIsImRhdHVtIiwiX3JlZGVlbWVyIiwiVGFrZUFCb29rVGFrZUFCb29rIiwib3JhY2xlUG9saWN5IiwiX2RhdHVtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/plutus.ts\n");

/***/ }),

/***/ "./utils/validators.ts":
/*!*****************************!*\
  !*** ./utils/validators.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addBooksToTx: () => (/* binding */ addBooksToTx),\n/* harmony export */   calculateSendBack: () => (/* binding */ calculateSendBack),\n/* harmony export */   donateBooks: () => (/* binding */ donateBooks),\n/* harmony export */   getContractAddress: () => (/* binding */ getContractAddress),\n/* harmony export */   swapBooks: () => (/* binding */ swapBooks)\n/* harmony export */ });\n/* harmony import */ var lucid_cardano__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lucid-cardano */ \"lucid-cardano\");\n/* harmony import */ var _plutus__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plutus */ \"./utils/plutus.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lucid_cardano__WEBPACK_IMPORTED_MODULE_0__, _plutus__WEBPACK_IMPORTED_MODULE_1__]);\n([lucid_cardano__WEBPACK_IMPORTED_MODULE_0__, _plutus__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst ORACLE_TOKEN = \"fdf2ab833eb1449a343a35e9bbbcb1a9f466688c6a0f31f0511e2b184f7261636c65546f6b656e\";\nconst findBookUTXOs = async (lucid, bookTokens, bookAddress)=>{\n    const allUTxOs = await lucid.utxosAt(bookAddress);\n    console.log({\n        bookAddress\n    });\n    const collectedUTxOs = [];\n    const collectedAssets = {};\n    for (let book of Object.keys(bookTokens)){\n        const bookUTxOs = allUTxOs.reduce((acc, utxo)=>{\n            if (Object.keys(utxo.assets).includes(book)) {\n                if (!collectedAssets[book] || collectedAssets[book] < bookTokens[book]) {\n                    acc.push({\n                        utxo,\n                        collectedBooks: Number(utxo.assets[book])\n                    });\n                }\n                collectedAssets[book] = collectedAssets[book] ? collectedAssets[book] + BigInt(utxo.assets[book]) : BigInt(utxo.assets[book]);\n            }\n            return acc;\n        }, []);\n        //allUTxOs.reduce(utxo => Object.keys(utxo.assets).includes(book))\n        collectedUTxOs.push(...bookUTxOs);\n    }\n    //console.log({ collectedUTxOs })\n    return collectedUTxOs;\n};\nconst calculateSendBack = (booksToReceive, collectedUTxOs)=>{\n    const sendBack = [];\n    const allBookAssets = collectedUTxOs.reduce((acc, utxo)=>{\n        Object.keys(utxo.assets).filter((asset)=>Object.keys(booksToReceive).includes(asset)).forEach((token)=>{\n            acc[token] = acc[token] ? acc[token] + BigInt(utxo.assets[token]) : BigInt(utxo.assets[token]);\n        });\n        return acc;\n    }, {});\n    console.log({\n        allBookAssets\n    });\n    for (let utxo of collectedUTxOs){\n        const assetsToReturn = {};\n        for (let asset of Object.keys(utxo.assets)){\n            if (!Object.keys(booksToReceive).includes(asset) && asset !== \"lovelace\") {\n                assetsToReturn[asset] = BigInt(utxo.assets[asset]);\n            } else if (asset !== \"lovelace\") {\n                if (BigInt(utxo.assets[asset]) <= allBookAssets[asset]) {\n                    allBookAssets[asset] = allBookAssets[asset] - BigInt(utxo.assets[asset]);\n                } else {\n                    assetsToReturn[asset] = BigInt(utxo.assets[asset]) - allBookAssets[asset];\n                    allBookAssets[asset] = 0n;\n                }\n            }\n        }\n        if (Object.keys(assetsToReturn).length > 0) {\n            const d = {\n                prevInput: {\n                    transactionId: {\n                        hash: utxo.txHash\n                    },\n                    outputIndex: BigInt(utxo.outputIndex)\n                }\n            };\n            const datum = lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.to(d, _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook._datum);\n            sendBack.push({\n                assets: assetsToReturn,\n                utxo,\n                datum: datum\n            });\n        }\n    }\n    return sendBack;\n};\nconst getContractAddress = (lucid)=>{\n    const oraclePolicy = ORACLE_TOKEN.slice(0, 56);\n    const validator = new _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook(oraclePolicy);\n    const validatorAddress = lucid?.utils.validatorToAddress(validator);\n    return validatorAddress;\n};\nconst addBooksToTx = (booksToSend, collectedUTxOs)=>{\n    const remainingBooks = {\n        ...booksToSend\n    };\n    const sendData = [];\n    for (let utxo of collectedUTxOs){\n        const assetsToSend = {};\n        const d = {\n            prevInput: {\n                transactionId: {\n                    hash: utxo.utxo.txHash\n                },\n                outputIndex: BigInt(utxo.utxo.outputIndex)\n            }\n        };\n        const datum = lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.to(d, _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook._datum);\n        const bookList = Object.keys(remainingBooks).filter((book)=>remainingBooks[book] > 0n);\n        let counter = utxo.collectedBooks;\n        for (let book of bookList){\n            if (counter === 0) break;\n            if (remainingBooks[book] >= BigInt(counter)) {\n                remainingBooks[book] = remainingBooks[book] - BigInt(counter);\n                assetsToSend[book] = BigInt(counter);\n                counter = 0;\n            } else {\n                counter = counter - Number(remainingBooks[book]);\n                assetsToSend[book] = remainingBooks[book];\n                remainingBooks[book] = 0n;\n            }\n        }\n        sendData.push({\n            datum,\n            books: assetsToSend\n        });\n    }\n    return sendData;\n};\nconst swapBooks = async (lucid, booksToReceive, booksToSend)=>{\n    const oracleAddress = lucid.utils.validatorToAddress(new _plutus__WEBPACK_IMPORTED_MODULE_1__.OracleMain());\n    const oracleUtxo = (await lucid.utxosAtWithUnit(oracleAddress, ORACLE_TOKEN)).find((utxo)=>{\n        const datum = lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.from(utxo.datum, _plutus__WEBPACK_IMPORTED_MODULE_1__.OracleMain.datum);\n        // TO DO: change this so that it finds multiple utxos if there are tokens with multiple policies\n        return datum.allowedPolicies.includes(Object.keys(booksToReceive)[0].slice(0, 56));\n    });\n    if (!oracleUtxo) throw new Error(\"Oracle UTXO not found\");\n    const oracleDatum = lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.from(oracleUtxo.datum, _plutus__WEBPACK_IMPORTED_MODULE_1__.OracleMain.datum);\n    const allowedPolicies = oracleDatum.allowedPolicies;\n    const validator = new _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook(ORACLE_TOKEN.slice(0, 56));\n    const validatorAddress = getContractAddress(lucid);\n    const collectedUTxOs = await findBookUTXOs(lucid, booksToReceive, validatorAddress);\n    const sendBack = calculateSendBack(booksToReceive, collectedUTxOs.map((utxo)=>utxo.utxo));\n    //console.log({oracleUtxo, collectedUTxOs, sendBack})\n    try {\n        const tx = lucid.newTx().readFrom([\n            oracleUtxo\n        ]).collectFrom(collectedUTxOs.map((utxo)=>utxo.utxo), lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.void()).attachSpendingValidator(validator).payToAddress(await lucid.wallet.address(), booksToReceive).attachSpendingValidator(validator);\n        const sendData = addBooksToTx(booksToSend, collectedUTxOs);\n        for (let { datum, books } of sendData){\n            tx.payToContract(validatorAddress, {\n                inline: datum\n            }, books);\n        }\n        for (let { assets, utxo, datum } of sendBack){\n            tx.payToContract(validatorAddress, {\n                inline: datum\n            }, assets);\n        }\n        const txComplete = await tx.complete();\n        const txSigned = await txComplete.sign().complete();\n        const txHash = await txSigned.submit();\n        return txHash;\n    } catch (e) {\n        console.error(\"ERORRR\", e);\n    }\n};\nconst donateBooks = async (lucid, booksToSend)=>{\n    const validatorAddress = getContractAddress(lucid);\n    const depositDatum = {\n        prevInput: null\n    };\n    const depositData = lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.to(depositDatum, _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook._datum);\n    const tx = await lucid.newTx().payToContract(validatorAddress, {\n        inline: lucid_cardano__WEBPACK_IMPORTED_MODULE_0__.Data.to(depositDatum, _plutus__WEBPACK_IMPORTED_MODULE_1__.TakeABookTakeABook._datum)\n    }, booksToSend).complete();\n    const txSigned = await tx.sign().complete();\n    const txHash = await txSigned.submit();\n    return txHash;\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OUIsa0JBQWtCO2dCQUFFK0IsUUFBUXRDO1lBQU0sR0FBR3RCO1FBQzFEO1FBRUEsTUFBTTZELGFBQWEsTUFBTVgsR0FBR1ksUUFBUTtRQUNwQyxNQUFNQyxXQUFXLE1BQU1GLFdBQVdHLElBQUksR0FBR0YsUUFBUTtRQUNqRCxNQUFNMUMsU0FBUyxNQUFNMkMsU0FBU0UsTUFBTTtRQUNwQyxPQUFPN0M7SUFDWCxFQUFFLE9BQU84QyxHQUFHO1FBQ1I3RSxRQUFROEUsS0FBSyxDQUFDLFVBQVVEO0lBQzVCO0FBRUosRUFBQztBQUdNLE1BQU1FLGNBQWMsT0FBT3BGLE9BQWNpRDtJQUM1QyxNQUFNSixtQkFBbUJKLG1CQUFtQnpDO0lBQzVDLE1BQU1xRixlQUE2QztRQUFFcEQsV0FBVztJQUFLO0lBQ3JFLE1BQU1xRCxjQUFjM0YsK0NBQUlBLENBQUM0QyxFQUFFLENBQUM4QyxjQUFjeEYsdURBQWtCQSxDQUFDMkMsTUFBTTtJQUNuRSxNQUFNMEIsS0FBSyxNQUFNbEUsTUFBTW1FLEtBQUssR0FDM0JRLGFBQWEsQ0FBQzlCLGtCQUFrQjtRQUFFK0IsUUFBUWpGLCtDQUFJQSxDQUFDNEMsRUFBRSxDQUFDOEMsY0FBY3hGLHVEQUFrQkEsQ0FBQzJDLE1BQU07SUFBRSxHQUFHUyxhQUM5RjZCLFFBQVE7SUFDVCxNQUFNQyxXQUFXLE1BQU1iLEdBQUdjLElBQUksR0FBR0YsUUFBUTtJQUN6QyxNQUFNMUMsU0FBUyxNQUFNMkMsU0FBU0UsTUFBTTtJQUNwQyxPQUFPN0M7QUFFWCxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJjYW51bS8uL3V0aWxzL3ZhbGlkYXRvcnMudHM/OGFlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDLCBDcmVkZW50aWFsLCBEYXRhLCBMdWNpZCwgU2NyaXB0LCBVVHhPLCBnZW5lcmF0ZVByaXZhdGVLZXksIGdldEFkZHJlc3NEZXRhaWxzIH0gZnJvbSBcImx1Y2lkLWNhcmRhbm9cIjtcclxuaW1wb3J0IHsgT3JhY2xlTWFpbiwgVGFrZUFCb29rVGFrZUFCb29rIH0gZnJvbSBcIi4vcGx1dHVzXCI7XHJcblxyXG5jb25zdCBPUkFDTEVfVE9LRU4gPSBcImZkZjJhYjgzM2ViMTQ0OWEzNDNhMzVlOWJiYmNiMWE5ZjQ2NjY4OGM2YTBmMzFmMDUxMWUyYjE4NGY3MjYxNjM2YzY1NTQ2ZjZiNjU2ZVwiXHJcblxyXG5jb25zdCBmaW5kQm9va1VUWE9zID0gYXN5bmMgKGx1Y2lkOiBMdWNpZCwgYm9va1Rva2VuczogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSwgYm9va0FkZHJlc3M6IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3QgYWxsVVR4T3MgPSBhd2FpdCBsdWNpZC51dHhvc0F0KGJvb2tBZGRyZXNzKVxyXG4gICAgY29uc29sZS5sb2coeyBib29rQWRkcmVzcyB9KVxyXG4gICAgY29uc3QgY29sbGVjdGVkVVR4T3M6IHsgdXR4bzogVVR4TywgY29sbGVjdGVkQm9va3M6IG51bWJlciB9W10gPSBbXVxyXG4gICAgY29uc3QgY29sbGVjdGVkQXNzZXRzOiB7IFtrZXk6IHN0cmluZ106IGJpZ2ludCB9ID0ge31cclxuICAgIGZvciAobGV0IGJvb2sgb2YgT2JqZWN0LmtleXMoYm9va1Rva2VucykpIHtcclxuICAgICAgICBjb25zdCBib29rVVR4T3MgPSBhbGxVVHhPcy5yZWR1Y2UoKGFjYzogeyB1dHhvOiBVVHhPLCBjb2xsZWN0ZWRCb29rczogbnVtYmVyIH1bXSwgdXR4bykgPT4ge1xyXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmtleXModXR4by5hc3NldHMpLmluY2x1ZGVzKGJvb2spKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbGxlY3RlZEFzc2V0c1tib29rXSB8fCBjb2xsZWN0ZWRBc3NldHNbYm9va10gPCBib29rVG9rZW5zW2Jvb2tdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWNjLnB1c2goeyB1dHhvLCBjb2xsZWN0ZWRCb29rczogTnVtYmVyKHV0eG8uYXNzZXRzW2Jvb2tdKSB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29sbGVjdGVkQXNzZXRzW2Jvb2tdID0gY29sbGVjdGVkQXNzZXRzW2Jvb2tdID8gY29sbGVjdGVkQXNzZXRzW2Jvb2tdICsgQmlnSW50KHV0eG8uYXNzZXRzW2Jvb2tdKSA6IEJpZ0ludCh1dHhvLmFzc2V0c1tib29rXSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYWNjXHJcbiAgICAgICAgfSwgW10pXHJcbiAgICAgICAgLy9hbGxVVHhPcy5yZWR1Y2UodXR4byA9PiBPYmplY3Qua2V5cyh1dHhvLmFzc2V0cykuaW5jbHVkZXMoYm9vaykpXHJcbiAgICAgICAgY29sbGVjdGVkVVR4T3MucHVzaCguLi5ib29rVVR4T3MpXHJcbiAgICB9XHJcbiAgICAvL2NvbnNvbGUubG9nKHsgY29sbGVjdGVkVVR4T3MgfSlcclxuICAgIHJldHVybiBjb2xsZWN0ZWRVVHhPc1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgY2FsY3VsYXRlU2VuZEJhY2sgPSAoYm9va3NUb1JlY2VpdmU6IHsgW2tleTogc3RyaW5nXTogYmlnaW50IH0sIGNvbGxlY3RlZFVUeE9zOiBVVHhPW10pID0+IHtcclxuICAgIGNvbnN0IHNlbmRCYWNrOiB7XHJcbiAgICAgICAgYXNzZXRzOiB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IGJpZ2ludFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdXR4bzogVVR4TyxcclxuICAgICAgICBkYXR1bTogc3RyaW5nXHJcbiAgICB9W10gPSBbXVxyXG4gICAgY29uc3QgYWxsQm9va0Fzc2V0cyA9IGNvbGxlY3RlZFVUeE9zLnJlZHVjZSgoYWNjOiB7IFtrZXk6IHN0cmluZ106IGJpZ2ludCB9LCB1dHhvKSA9PiB7XHJcbiAgICAgICAgT2JqZWN0LmtleXModXR4by5hc3NldHMpLmZpbHRlcihhc3NldCA9PiBPYmplY3Qua2V5cyhib29rc1RvUmVjZWl2ZSkuaW5jbHVkZXMoYXNzZXQpKS5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICAgICAgYWNjW3Rva2VuXSA9IGFjY1t0b2tlbl0gPyBhY2NbdG9rZW5dICsgQmlnSW50KHV0eG8uYXNzZXRzW3Rva2VuXSkgOiBCaWdJbnQodXR4by5hc3NldHNbdG9rZW5dKVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIGFjY1xyXG4gICAgfSwge30pXHJcbiAgICBjb25zb2xlLmxvZyh7IGFsbEJvb2tBc3NldHMgfSlcclxuICAgIGZvciAobGV0IHV0eG8gb2YgY29sbGVjdGVkVVR4T3MpIHtcclxuICAgICAgICBjb25zdCBhc3NldHNUb1JldHVybjogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSA9IHt9XHJcbiAgICAgICAgZm9yIChsZXQgYXNzZXQgb2YgT2JqZWN0LmtleXModXR4by5hc3NldHMpKSB7XHJcbiAgICAgICAgICAgIGlmICghT2JqZWN0LmtleXMoYm9va3NUb1JlY2VpdmUpLmluY2x1ZGVzKGFzc2V0KSAmJiBhc3NldCAhPT0gXCJsb3ZlbGFjZVwiKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NldHNUb1JldHVyblthc3NldF0gPSBCaWdJbnQodXR4by5hc3NldHNbYXNzZXRdKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFzc2V0ICE9PSBcImxvdmVsYWNlXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChCaWdJbnQodXR4by5hc3NldHNbYXNzZXRdKSA8PSBhbGxCb29rQXNzZXRzW2Fzc2V0XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsbEJvb2tBc3NldHNbYXNzZXRdID0gYWxsQm9va0Fzc2V0c1thc3NldF0gLSBCaWdJbnQodXR4by5hc3NldHNbYXNzZXRdKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHNUb1JldHVyblthc3NldF0gPSBCaWdJbnQodXR4by5hc3NldHNbYXNzZXRdKSAtIGFsbEJvb2tBc3NldHNbYXNzZXRdXHJcbiAgICAgICAgICAgICAgICAgICAgYWxsQm9va0Fzc2V0c1thc3NldF0gPSAwblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhhc3NldHNUb1JldHVybikubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBkOiBUYWtlQUJvb2tUYWtlQUJvb2tbXCJfZGF0dW1cIl0gPSB7IHByZXZJbnB1dDogeyB0cmFuc2FjdGlvbklkOiB7IGhhc2g6IHV0eG8udHhIYXNoIH0sIG91dHB1dEluZGV4OiBCaWdJbnQodXR4by5vdXRwdXRJbmRleCkgfSB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdHVtID0gRGF0YS50byhkLCBUYWtlQUJvb2tUYWtlQUJvb2suX2RhdHVtKVxyXG4gICAgICAgICAgICBzZW5kQmFjay5wdXNoKHsgYXNzZXRzOiBhc3NldHNUb1JldHVybiwgdXR4bywgZGF0dW06IGRhdHVtIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbmRCYWNrXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBnZXRDb250cmFjdEFkZHJlc3MgPSAobHVjaWQ6IEx1Y2lkKSA9PntcclxuICAgIGNvbnN0IG9yYWNsZVBvbGljeSA9IE9SQUNMRV9UT0tFTi5zbGljZSgwLCA1NilcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBUYWtlQUJvb2tUYWtlQUJvb2sob3JhY2xlUG9saWN5KVxyXG4gICAgY29uc3QgdmFsaWRhdG9yQWRkcmVzcyA9IGx1Y2lkPy51dGlscy52YWxpZGF0b3JUb0FkZHJlc3ModmFsaWRhdG9yKVxyXG4gICAgcmV0dXJuIHZhbGlkYXRvckFkZHJlc3NcclxuXHJcbn1cclxuZXhwb3J0IGNvbnN0IGFkZEJvb2tzVG9UeCA9IChib29rc1RvU2VuZDogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSwgY29sbGVjdGVkVVR4T3M6IHsgdXR4bzogVVR4TywgY29sbGVjdGVkQm9va3M6IG51bWJlciB9W10pID0+IHtcclxuICAgIGNvbnN0IHJlbWFpbmluZ0Jvb2tzID0geyAuLi5ib29rc1RvU2VuZCB9XHJcbiAgICBjb25zdCBzZW5kRGF0YTogeyBkYXR1bTogc3RyaW5nLCBib29rczogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSB9W10gPSBbXVxyXG4gICAgZm9yIChsZXQgdXR4byBvZiBjb2xsZWN0ZWRVVHhPcykge1xyXG4gICAgICAgIGNvbnN0IGFzc2V0c1RvU2VuZDogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSA9IHt9XHJcbiAgICAgICAgY29uc3QgZDogVGFrZUFCb29rVGFrZUFCb29rW1wiX2RhdHVtXCJdID0geyBwcmV2SW5wdXQ6IHsgdHJhbnNhY3Rpb25JZDogeyBoYXNoOiB1dHhvLnV0eG8udHhIYXNoIH0sIG91dHB1dEluZGV4OiBCaWdJbnQodXR4by51dHhvLm91dHB1dEluZGV4KSB9IH1cclxuICAgICAgICBjb25zdCBkYXR1bSA9IERhdGEudG8oZCwgVGFrZUFCb29rVGFrZUFCb29rLl9kYXR1bSlcclxuXHJcbiAgICAgICAgY29uc3QgYm9va0xpc3QgPSBPYmplY3Qua2V5cyhyZW1haW5pbmdCb29rcykuZmlsdGVyKGJvb2sgPT4gcmVtYWluaW5nQm9va3NbYm9va10gPiAwbilcclxuICAgICAgICBsZXQgY291bnRlciA9IHV0eG8uY29sbGVjdGVkQm9va3NcclxuICAgICAgICBmb3IgKGxldCBib29rIG9mIGJvb2tMaXN0KSB7XHJcbiAgICAgICAgICAgIGlmIChjb3VudGVyID09PSAwKSBicmVha1xyXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nQm9va3NbYm9va10gPj0gQmlnSW50KGNvdW50ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICByZW1haW5pbmdCb29rc1tib29rXSA9IHJlbWFpbmluZ0Jvb2tzW2Jvb2tdIC0gQmlnSW50KGNvdW50ZXIpXHJcbiAgICAgICAgICAgICAgICBhc3NldHNUb1NlbmRbYm9va10gPSBCaWdJbnQoY291bnRlcilcclxuICAgICAgICAgICAgICAgIGNvdW50ZXIgPSAwXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudGVyID0gY291bnRlciAtIE51bWJlcihyZW1haW5pbmdCb29rc1tib29rXSlcclxuICAgICAgICAgICAgICAgIGFzc2V0c1RvU2VuZFtib29rXSA9IHJlbWFpbmluZ0Jvb2tzW2Jvb2tdXHJcbiAgICAgICAgICAgICAgICByZW1haW5pbmdCb29rc1tib29rXSA9IDBuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbmREYXRhLnB1c2goeyBkYXR1bSwgYm9va3M6IGFzc2V0c1RvU2VuZCB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbmREYXRhXHJcbn1cclxuZXhwb3J0IGNvbnN0IHN3YXBCb29rcyA9IGFzeW5jIChsdWNpZDogTHVjaWQsIGJvb2tzVG9SZWNlaXZlOiB7IFtrZXk6IHN0cmluZ106IGJpZ2ludCB9LCBib29rc1RvU2VuZDogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSkgPT4ge1xyXG4gICAgY29uc3Qgb3JhY2xlQWRkcmVzcyA9IGx1Y2lkLnV0aWxzLnZhbGlkYXRvclRvQWRkcmVzcyhuZXcgT3JhY2xlTWFpbigpKVxyXG5cclxuXHJcbiAgICBjb25zdCBvcmFjbGVVdHhvID0gKGF3YWl0IGx1Y2lkLnV0eG9zQXRXaXRoVW5pdChvcmFjbGVBZGRyZXNzLCBPUkFDTEVfVE9LRU4pKS5maW5kKCh1dHhvKT0+e1xyXG4gICAgICAgIGNvbnN0IGRhdHVtID0gRGF0YS5mcm9tKHV0eG8uZGF0dW0hLCBPcmFjbGVNYWluLmRhdHVtKVxyXG5cclxuICAgICAgICAvLyBUTyBETzogY2hhbmdlIHRoaXMgc28gdGhhdCBpdCBmaW5kcyBtdWx0aXBsZSB1dHhvcyBpZiB0aGVyZSBhcmUgdG9rZW5zIHdpdGggbXVsdGlwbGUgcG9saWNpZXNcclxuICAgICAgICByZXR1cm4gZGF0dW0uYWxsb3dlZFBvbGljaWVzLmluY2x1ZGVzKE9iamVjdC5rZXlzKGJvb2tzVG9SZWNlaXZlKVswXS5zbGljZSgwLCA1NikpXHJcbiAgICB9KVxyXG4gICAgaWYoIW9yYWNsZVV0eG8pIHRocm93IG5ldyBFcnJvcihcIk9yYWNsZSBVVFhPIG5vdCBmb3VuZFwiKVxyXG4gICAgY29uc3Qgb3JhY2xlRGF0dW0gPSBEYXRhLmZyb20ob3JhY2xlVXR4by5kYXR1bSEsIE9yYWNsZU1haW4uZGF0dW0pXHJcbiAgICBjb25zdCBhbGxvd2VkUG9saWNpZXMgPSBvcmFjbGVEYXR1bS5hbGxvd2VkUG9saWNpZXNcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBUYWtlQUJvb2tUYWtlQUJvb2soT1JBQ0xFX1RPS0VOLnNsaWNlKDAsIDU2KSlcclxuICAgIGNvbnN0IHZhbGlkYXRvckFkZHJlc3MgPSBnZXRDb250cmFjdEFkZHJlc3MobHVjaWQpXHJcbiAgICBjb25zdCBjb2xsZWN0ZWRVVHhPcyA9IGF3YWl0IGZpbmRCb29rVVRYT3MobHVjaWQsIGJvb2tzVG9SZWNlaXZlLCB2YWxpZGF0b3JBZGRyZXNzKVxyXG4gICAgY29uc3Qgc2VuZEJhY2sgPSBjYWxjdWxhdGVTZW5kQmFjayhib29rc1RvUmVjZWl2ZSwgY29sbGVjdGVkVVR4T3MubWFwKHV0eG8gPT4gdXR4by51dHhvKSlcclxuICAgIC8vY29uc29sZS5sb2coe29yYWNsZVV0eG8sIGNvbGxlY3RlZFVUeE9zLCBzZW5kQmFja30pXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHR4ID0gbHVjaWQubmV3VHgoKVxyXG4gICAgICAgICAgICAucmVhZEZyb20oW29yYWNsZVV0eG9dKVxyXG4gICAgICAgICAgICAuY29sbGVjdEZyb20oY29sbGVjdGVkVVR4T3MubWFwKHV0eG8gPT4gdXR4by51dHhvKSwgRGF0YS52b2lkKCkpXHJcbiAgICAgICAgICAgIC5hdHRhY2hTcGVuZGluZ1ZhbGlkYXRvcih2YWxpZGF0b3IpXHJcbiAgICAgICAgICAgIC5wYXlUb0FkZHJlc3MoYXdhaXQgbHVjaWQud2FsbGV0LmFkZHJlc3MoKSwgYm9va3NUb1JlY2VpdmUpXHJcbiAgICAgICAgICAgIC5hdHRhY2hTcGVuZGluZ1ZhbGlkYXRvcih2YWxpZGF0b3IpXHJcblxyXG4gICAgICAgIGNvbnN0IHNlbmREYXRhID0gYWRkQm9va3NUb1R4KGJvb2tzVG9TZW5kLCBjb2xsZWN0ZWRVVHhPcylcclxuICAgICAgICBmb3IgKGxldCB7IGRhdHVtLCBib29rcyB9IG9mIHNlbmREYXRhKSB7XHJcbiAgICAgICAgICAgIHR4LnBheVRvQ29udHJhY3QodmFsaWRhdG9yQWRkcmVzcywgeyBpbmxpbmU6IGRhdHVtIH0sIGJvb2tzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCB7IGFzc2V0cywgdXR4bywgZGF0dW0gfSBvZiBzZW5kQmFjaykge1xyXG4gICAgICAgICAgICB0eC5wYXlUb0NvbnRyYWN0KHZhbGlkYXRvckFkZHJlc3MsIHsgaW5saW5lOiBkYXR1bSB9LCBhc3NldHMpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB0eENvbXBsZXRlID0gYXdhaXQgdHguY29tcGxldGUoKVxyXG4gICAgICAgIGNvbnN0IHR4U2lnbmVkID0gYXdhaXQgdHhDb21wbGV0ZS5zaWduKCkuY29tcGxldGUoKVxyXG4gICAgICAgIGNvbnN0IHR4SGFzaCA9IGF3YWl0IHR4U2lnbmVkLnN1Ym1pdCgpXHJcbiAgICAgICAgcmV0dXJuIHR4SGFzaFxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFUk9SUlJcIiwgZSlcclxuICAgIH1cclxuXHJcbn1cclxuXHJcblxyXG5leHBvcnQgY29uc3QgZG9uYXRlQm9va3MgPSBhc3luYyAobHVjaWQ6IEx1Y2lkLCBib29rc1RvU2VuZDogeyBba2V5OiBzdHJpbmddOiBiaWdpbnQgfSkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yQWRkcmVzcyA9IGdldENvbnRyYWN0QWRkcmVzcyhsdWNpZClcclxuICAgIGNvbnN0IGRlcG9zaXREYXR1bTogVGFrZUFCb29rVGFrZUFCb29rW1wiX2RhdHVtXCJdID0geyBwcmV2SW5wdXQ6IG51bGwgfVxyXG4gICAgY29uc3QgZGVwb3NpdERhdGEgPSBEYXRhLnRvKGRlcG9zaXREYXR1bSwgVGFrZUFCb29rVGFrZUFCb29rLl9kYXR1bSlcclxuICAgIGNvbnN0IHR4ID0gYXdhaXQgbHVjaWQubmV3VHgoKVxyXG4gICAgLnBheVRvQ29udHJhY3QodmFsaWRhdG9yQWRkcmVzcywgeyBpbmxpbmU6IERhdGEudG8oZGVwb3NpdERhdHVtLCBUYWtlQUJvb2tUYWtlQUJvb2suX2RhdHVtKSB9LCBib29rc1RvU2VuZClcclxuICAgIC5jb21wbGV0ZSgpXHJcbiAgICBjb25zdCB0eFNpZ25lZCA9IGF3YWl0IHR4LnNpZ24oKS5jb21wbGV0ZSgpXHJcbiAgICBjb25zdCB0eEhhc2ggPSBhd2FpdCB0eFNpZ25lZC5zdWJtaXQoKVxyXG4gICAgcmV0dXJuIHR4SGFzaFxyXG5cclxufSJdLCJuYW1lcyI6WyJEYXRhIiwiT3JhY2xlTWFpbiIsIlRha2VBQm9va1Rha2VBQm9vayIsIk9SQUNMRV9UT0tFTiIsImZpbmRCb29rVVRYT3MiLCJsdWNpZCIsImJvb2tUb2tlbnMiLCJib29rQWRkcmVzcyIsImFsbFVUeE9zIiwidXR4b3NBdCIsImNvbnNvbGUiLCJsb2ciLCJjb2xsZWN0ZWRVVHhPcyIsImNvbGxlY3RlZEFzc2V0cyIsImJvb2siLCJPYmplY3QiLCJrZXlzIiwiYm9va1VUeE9zIiwicmVkdWNlIiwiYWNjIiwidXR4byIsImFzc2V0cyIsImluY2x1ZGVzIiwicHVzaCIsImNvbGxlY3RlZEJvb2tzIiwiTnVtYmVyIiwiQmlnSW50IiwiY2FsY3VsYXRlU2VuZEJhY2siLCJib29rc1RvUmVjZWl2ZSIsInNlbmRCYWNrIiwiYWxsQm9va0Fzc2V0cyIsImZpbHRlciIsImFzc2V0IiwiZm9yRWFjaCIsInRva2VuIiwiYXNzZXRzVG9SZXR1cm4iLCJsZW5ndGgiLCJkIiwicHJldklucHV0IiwidHJhbnNhY3Rpb25JZCIsImhhc2giLCJ0eEhhc2giLCJvdXRwdXRJbmRleCIsImRhdHVtIiwidG8iLCJfZGF0dW0iLCJnZXRDb250cmFjdEFkZHJlc3MiLCJvcmFjbGVQb2xpY3kiLCJzbGljZSIsInZhbGlkYXRvciIsInZhbGlkYXRvckFkZHJlc3MiLCJ1dGlscyIsInZhbGlkYXRvclRvQWRkcmVzcyIsImFkZEJvb2tzVG9UeCIsImJvb2tzVG9TZW5kIiwicmVtYWluaW5nQm9va3MiLCJzZW5kRGF0YSIsImFzc2V0c1RvU2VuZCIsImJvb2tMaXN0IiwiY291bnRlciIsImJvb2tzIiwic3dhcEJvb2tzIiwib3JhY2xlQWRkcmVzcyIsIm9yYWNsZVV0eG8iLCJ1dHhvc0F0V2l0aFVuaXQiLCJmaW5kIiwiZnJvbSIsImFsbG93ZWRQb2xpY2llcyIsIkVycm9yIiwib3JhY2xlRGF0dW0iLCJtYXAiLCJ0eCIsIm5ld1R4IiwicmVhZEZyb20iLCJjb2xsZWN0RnJvbSIsInZvaWQiLCJhdHRhY2hTcGVuZGluZ1ZhbGlkYXRvciIsInBheVRvQWRkcmVzcyIsIndhbGxldCIsImFkZHJlc3MiLCJwYXlUb0NvbnRyYWN0IiwiaW5saW5lIiwidHhDb21wbGV0ZSIsImNvbXBsZXRlIiwidHhTaWduZWQiLCJzaWduIiwic3VibWl0IiwiZSIsImVycm9yIiwiZG9uYXRlQm9va3MiLCJkZXBvc2l0RGF0dW0iLCJkZXBvc2l0RGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/validators.ts\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "next-themes":
/*!******************************!*\
  !*** external "next-themes" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("next-themes");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "@tanstack/react-query":
/*!****************************************!*\
  !*** external "@tanstack/react-query" ***!
  \****************************************/
/***/ ((module) => {

"use strict";
module.exports = import("@tanstack/react-query");;

/***/ }),

/***/ "lucid-cardano":
/*!********************************!*\
  !*** external "lucid-cardano" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = import("lucid-cardano");;

/***/ }),

/***/ "sonner":
/*!*************************!*\
  !*** external "sonner" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = import("sonner");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/_app.tsx"));
module.exports = __webpack_exports__;

})();